<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogos Pedag√≥gicos - Capi Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes dance {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.1); }
            50% { transform: rotate(5deg) scale(1.1); }
            75% { transform: rotate(-3deg) scale(1.05); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        .bounce { animation: bounce 2s infinite; }
        .dance { animation: dance 1s ease-in-out; }
        .float { animation: float 3s ease-in-out infinite; }
        
        .age-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .age-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .speech-bubble {
            position: relative;
            background: white;
            border-radius: 20px;
            padding: 15px;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 30px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: white;
        }
        
        .game-preview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            color: white;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .game-preview:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="min-h-full bg-gradient-to-br from-blue-400 via-purple-500 to-pink-400">
    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-sm shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <img src="https://www.riopreto.sp.leg.br/Content/css/images/logo-1.png" alt="Logo C√¢mara Municipal" class="h-12 w-auto" onerror="this.src=''; this.alt='Logo n√£o dispon√≠vel'; this.style.display='none';">
                <h1 class="text-3xl font-bold text-purple-600 uppercase">CAPI GAMES</h1>
            </div>
            
            <div class="flex items-center space-x-4">
                <button id="toggleCapi" class="bg-yellow-400 hover:bg-yellow-500 text-purple-800 font-bold py-2 px-4 rounded-full transition-colors">
                    <span id="capiToggleText">üêπ DESABILITAR CAPI</span>
                </button>
                <button onclick="openGameConfig()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full">
                    ‚öôÔ∏è CONFIGURA√á√ïES
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Welcome Section -->
        <div class="text-center mb-12">
            <h2 class="text-5xl font-bold text-white mb-4 drop-shadow-lg">
                BEM-VINDOS AO MUNDO DOS JOGOS!
            </h2>
            <p class="text-xl text-white/90 max-w-3xl mx-auto drop-shadow uppercase">
                EXPLORE, APRENDA E DIVIRTA-SE COM JOGOS EDUCATIVOS CRIADOS ESPECIALMENTE PARA CADA IDADE!
            </p>
        </div>

        <!-- Search Section -->
        <div id="searchSection" class="max-w-4xl mx-auto mb-12 bg-white/95 backdrop-blur-sm rounded-3xl p-8 shadow-2xl hidden">
            <div class="text-center mb-6">
                <h3 class="text-3xl font-bold text-purple-600 mb-2">üîç BUSCAR JOGOS</h3>
                <p class="text-gray-600">ENCONTRE O JOGO PERFEITO PARA VOC√ä!</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">PALAVRA-CHAVE:</label>
                    <input type="text" id="searchKeyword" placeholder="Digite aqui..." 
                           class="w-full p-3 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none uppercase"
                           oninput="performSearch()">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">IDADE:</label>
                    <select id="searchAge" onchange="performSearch()" 
                            class="w-full p-3 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none">
                        <option value="">TODAS AS IDADES</option>
                        <option value="1-3">1 A 3 ANOS</option>
                        <option value="4-6">4 A 6 ANOS</option>
                        <option value="7-9">7 A 9 ANOS</option>
                        <option value="10-14">10 A 14 ANOS</option>
                        <option value="naee">SALA DO NAEE</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">TIPO:</label>
                    <select id="searchType" onchange="performSearch()" 
                            class="w-full p-3 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none">
                        <option value="">TODOS OS TIPOS</option>
                        <option value="matematica">MATEM√ÅTICA</option>
                        <option value="portugues">PORTUGU√äS</option>
                        <option value="ciencias">CI√äNCIAS</option>
                        <option value="cores">CORES E FORMAS</option>
                        <option value="coordenacao">COORDENA√á√ÉO</option>
                        <option value="comunicacao">COMUNICA√á√ÉO</option>
                        <option value="sensorial">SENSORIAL</option>
                        <option value="rotina">ROTINA</option>
                    </select>
                </div>
            </div>
            
            <div class="flex justify-center space-x-4">
                <button onclick="clearSearch()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full transition-colors">
                    üóëÔ∏è LIMPAR BUSCA
                </button>
                <button onclick="toggleSearch()" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full transition-colors">
                    ‚Üê VOLTAR
                </button>
            </div>
            
            <!-- Search Results -->
            <div id="searchResults" class="mt-8 hidden">
                <h4 class="text-2xl font-bold text-purple-600 mb-4">RESULTADOS DA BUSCA:</h4>
                <div id="searchResultsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>

        <!-- Search Toggle Button -->
        <div class="text-center mb-8">
            <button onclick="toggleSearch()" class="bg-white/90 hover:bg-white text-purple-600 font-bold py-4 px-8 rounded-full text-xl shadow-lg transition-colors">
                üîç BUSCAR JOGOS
            </button>
        </div>

        <!-- Capi Mascot -->
        <div id="capiContainer" class="fixed bottom-8 right-8 z-40">
            <div id="capiSpeech" class="speech-bubble hidden mb-4 max-w-xs">
                <p id="capiMessage" class="text-purple-800 font-semibold"></p>
            </div>
            
            <div id="capi" class="float cursor-pointer bg-orange-400 rounded-full p-4 shadow-2xl hover:bg-orange-500 transition-colors">
                <svg width="80" height="80" viewBox="0 0 100 100" class="text-white">
                    <!-- Corpo da Capivara -->
                    <ellipse cx="50" cy="60" rx="35" ry="25" fill="#8B4513"/>
                    <!-- Cabe√ßa -->
                    <ellipse cx="50" cy="35" rx="25" ry="20" fill="#A0522D"/>
                    <!-- Orelhas -->
                    <ellipse cx="35" cy="25" rx="8" ry="12" fill="#8B4513"/>
                    <ellipse cx="65" cy="25" rx="8" ry="12" fill="#8B4513"/>
                    <!-- Olhos -->
                    <circle cx="42" cy="32" r="4" fill="white"/>
                    <circle cx="58" cy="32" r="4" fill="white"/>
                    <circle cx="42" cy="32" r="2" fill="black"/>
                    <circle cx="58" cy="32" r="2" fill="black"/>
                    <!-- Nariz -->
                    <ellipse cx="50" cy="40" rx="3" ry="2" fill="black"/>
                    <!-- Boca -->
                    <path d="M 45 45 Q 50 48 55 45" stroke="black" stroke-width="2" fill="none"/>
                    <!-- Patas -->
                    <ellipse cx="35" cy="80" rx="6" ry="8" fill="#8B4513"/>
                    <ellipse cx="50" cy="80" rx="6" ry="8" fill="#8B4513"/>
                    <ellipse cx="65" cy="80" rx="6" ry="8" fill="#8B4513"/>
                </svg>
            </div>
        </div>

        <!-- Name Input Section -->
        <div id="nameSection" class="max-w-md mx-auto mb-12">
            <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-8 shadow-2xl text-center">
                <div class="text-6xl mb-4">üëã</div>
                <h3 class="text-2xl font-bold text-purple-600 mb-6">OL√Å√Å√Å! QUAL √â O SEU NOME?</h3>
                
                <div class="mb-6">
                    <input 
                        type="text" 
                        id="playerName" 
                        placeholder="DIGITE SEU NOME AQUI"
                        class="w-full p-4 text-2xl font-bold text-center text-purple-800 bg-yellow-100 border-4 border-yellow-300 rounded-2xl focus:border-yellow-500 focus:outline-none placeholder-purple-400 uppercase"
                        maxlength="20"
                    >
                </div>
                
                <button 
                    id="startButton" 
                    onclick="startGame()" 
                    class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-2xl text-xl transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
                    disabled
                >
                    üéÆ VAMOS JOGAR!
                </button>
                
                <p class="text-sm text-gray-600 mt-4 uppercase">PRECISO SABER SEU NOME PARA COME√áARMOS!</p>
            </div>
        </div>

        <!-- Age Groups Dashboard -->
        <div id="ageGroupsSection" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-12 hidden">
            <!-- 1-3 anos -->
            <div class="age-card bg-white rounded-3xl p-6 shadow-xl" onclick="selectAgeGroup('1-3')">
                <div class="text-center">
                    <div class="text-6xl mb-4">üß∏</div>
                    <h3 class="text-2xl font-bold text-purple-600 mb-2">1 A 3 ANOS</h3>
                    <p class="text-gray-600 mb-4">CORES E FORMAS</p>
                    <div class="bg-red-100 rounded-2xl p-4">
                        <p class="text-red-800 font-semibold text-sm">EXPLORA√á√ÉO SENSORIAL</p>
                        <p class="text-red-600 text-xs mt-1">RECONHECIMENTO B√ÅSICO</p>
                    </div>
                </div>
            </div>

            <!-- 4-6 anos -->
            <div class="age-card bg-white rounded-3xl p-6 shadow-xl" onclick="selectAgeGroup('4-6')">
                <div class="text-center">
                    <div class="text-6xl mb-4">üß©</div>
                    <h3 class="text-2xl font-bold text-blue-600 mb-2">4 A 6 ANOS</h3>
                    <p class="text-gray-600 mb-4">LETRAS E N√öMEROS</p>
                    <div class="bg-blue-100 rounded-2xl p-4">
                        <p class="text-blue-800 font-semibold text-sm">ALFABETIZA√á√ÉO</p>
                        <p class="text-blue-600 text-xs mt-1">PRIMEIRAS PALAVRAS</p>
                    </div>
                </div>
            </div>

            <!-- 7-9 anos -->
            <div class="age-card bg-white rounded-3xl p-6 shadow-xl" onclick="selectAgeGroup('7-9')">
                <div class="text-center">
                    <div class="text-6xl mb-4">üö≤</div>
                    <h3 class="text-2xl font-bold text-green-600 mb-2">7 A 9 ANOS</h3>
                    <p class="text-gray-600 mb-4">LEITURA E MATEM√ÅTICA</p>
                    <div class="bg-green-100 rounded-2xl p-4">
                        <p class="text-green-800 font-semibold text-sm">RACIOC√çNIO L√ìGICO</p>
                        <p class="text-green-600 text-xs mt-1">RESOLU√á√ÉO DE PROBLEMAS</p>
                    </div>
                </div>
            </div>

            <!-- 10-14 anos -->
            <div class="age-card bg-white rounded-3xl p-6 shadow-xl" onclick="selectAgeGroup('10-14')">
                <div class="text-center">
                    <div class="text-6xl mb-4">üéÆ</div>
                    <h3 class="text-2xl font-bold text-purple-600 mb-2">10 A 14 ANOS</h3>
                    <p class="text-gray-600 mb-4">CI√äNCIAS E CULTURA</p>
                    <div class="bg-purple-100 rounded-2xl p-4">
                        <p class="text-purple-800 font-semibold text-sm">PENSAMENTO CR√çTICO</p>
                        <p class="text-purple-600 text-xs mt-1">PROJETOS AVAN√áADOS</p>
                    </div>
                </div>
            </div>

            <!-- SALA DO NAEE -->
            <div class="age-card bg-gradient-to-br from-orange-400 to-pink-500 rounded-3xl p-6 shadow-xl border-4 border-yellow-300" onclick="selectAgeGroup('naee')">
                <div class="text-center">
                    <div class="text-6xl mb-4">üåü</div>
                    <h3 class="text-2xl font-bold text-white mb-2">SALA DO NAEE</h3>
                    <p class="text-white/90 mb-4 font-semibold">EDUCA√á√ÉO ESPECIAL</p>
                    <div class="bg-white/20 backdrop-blur-sm rounded-2xl p-4">
                        <p class="text-white font-semibold text-sm">JOGOS ADAPTADOS</p>
                        <p class="text-white/90 text-xs mt-1">INCLUS√ÉO E ACESSIBILIDADE</p>
                    </div>
                    <div class="mt-3 flex justify-center space-x-1">
                        <span class="text-lg">‚ôø</span>
                        <span class="text-lg">ü§ù</span>
                        <span class="text-lg">üíù</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Games Section -->
        <div id="gamesSection" class="hidden">
            <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-2xl">
                <div class="flex items-center justify-between mb-6">
                    <h3 id="gamesSectionTitle" class="text-3xl font-bold text-purple-600"></h3>
                    <button onclick="backToDashboard()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full">
                        ‚Üê VOLTAR
                    </button>
                </div>
                
                <div id="gamesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Games will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Game Modal -->
        <div id="gameModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl">
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white">
                    <div class="flex items-center justify-between">
                        <h3 id="gameTitle" class="text-2xl font-bold"></h3>
                        <button onclick="closeGame()" class="bg-white/20 hover:bg-white/30 rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="gameContent" class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                    <!-- Game content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Login Modal -->
        <div id="loginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-3xl max-w-md w-full shadow-2xl">
                <div class="bg-gradient-to-r from-red-500 to-pink-600 p-6 text-white rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 class="text-2xl font-bold">üîê ACESSO RESTRITO</h3>
                        <button onclick="closeLogin()" class="bg-white/20 hover:bg-white/30 rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">‚öôÔ∏è</div>
                        <h4 class="text-xl font-bold text-gray-800 mb-2">CONFIGURA√á√ïES</h4>
                        <p class="text-gray-600">Digite suas credenciais para acessar</p>
                    </div>
                    
                    <form id="loginForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">USU√ÅRIO:</label>
                            <input type="text" id="loginUser" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none" placeholder="Digite o usu√°rio">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">SENHA:</label>
                            <input type="password" id="loginPassword" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none" placeholder="Digite a senha">
                        </div>
                        
                        <div id="loginError" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg">
                            <strong>Erro:</strong> Usu√°rio ou senha incorretos!
                        </div>
                        
                        <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            üîì ENTRAR
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Configuration Modal -->
        <div id="configModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-3xl max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl">
                <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white">
                    <div class="flex items-center justify-between">
                        <h3 class="text-2xl font-bold">‚öôÔ∏è CONFIGURA√á√ïES DE JOGOS</h3>
                        <button onclick="closeConfig()" class="bg-white/20 hover:bg-white/30 rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto max-h-[calc(95vh-120px)]">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Formul√°rio de Adi√ß√£o -->
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <h4 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                <span class="text-2xl mr-2">‚ûï</span>
                                ADICIONAR NOVO JOGO
                            </h4>
                            
                            <form id="gameForm" class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">NOME DO JOGO *</label>
                                    <input type="text" id="gameName" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">DESCRI√á√ÉO</label>
                                    <textarea id="gameDescription" rows="3" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">CATEGORIA *</label>
                                    <select id="gameCategory" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                        <option value="">Selecione uma categoria</option>
                                        <option value="1-3">Creche (1-3 anos)</option>
                                        <option value="4-6">Infantil (4-6 anos)</option>
                                        <option value="7-9">Fundamental I (7-9 anos)</option>
                                        <option value="10-14">Fundamental II (10-14 anos)</option>
                                        <option value="naee">Sala do NAEE (Educa√ß√£o Especial)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">TIPO DE JOGO</label>
                                    <select id="gameType" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                        <option value="">Selecione o tipo</option>
                                        <option value="matematica">Matem√°tica</option>
                                        <option value="portugues">Portugu√™s</option>
                                        <option value="ciencias">Ci√™ncias</option>
                                        <option value="cores">Cores e Formas</option>
                                        <option value="coordenacao">Coordena√ß√£o</option>
                                        <option value="comunicacao">Comunica√ß√£o</option>
                                        <option value="sensorial">Sensorial</option>
                                        <option value="rotina">Rotina</option>
                                    </select>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">COR DO CARD</label>
                                        <div class="flex items-center space-x-2">
                                            <input type="color" id="cardColor" value="#667eea" class="w-12 h-12 border-2 border-gray-300 rounded-lg cursor-pointer">
                                            <div id="colorPreview" class="flex-1 h-12 rounded-lg border-2 border-gray-300" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">√çCONE</label>
                                        <input type="text" id="gameIcon" placeholder="üéÆ" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">URL DA IMAGEM</label>
                                    <input type="url" id="gameImage" placeholder="https://exemplo.com/imagem.jpg" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">CAMINHO DA PASTA</label>
                                    <input type="text" id="gamePath" placeholder="/jogos/meu-jogo/" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">URL DO JOGO</label>
                                    <input type="url" id="gameUrl" placeholder="https://exemplo.com/jogo" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                </div>
                                
                                <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                    ‚úÖ ADICIONAR JOGO
                                </button>
                            </form>
                        </div>
                        
                        <!-- Sistema de Atualiza√ß√£o e Administradores -->
                        <div class="space-y-6">
                            <!-- Gerenciamento de Administradores -->
                            <div class="bg-red-50 rounded-2xl p-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                    <span class="text-2xl mr-2">üë•</span>
                                    GERENCIAR ADMINISTRADORES
                                </h4>
                                
                                <div class="space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">NOVO USU√ÅRIO</label>
                                            <input type="text" id="newAdminUser" placeholder="Digite o usu√°rio" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">NOVA SENHA</label>
                                            <input type="password" id="newAdminPassword" placeholder="Digite a senha" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none">
                                        </div>
                                    </div>
                                    
                                    <button onclick="addAdmin()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                        ‚ûï ADICIONAR ADMINISTRADOR
                                    </button>
                                    
                                    <div class="mt-4">
                                        <h5 class="text-lg font-bold text-gray-700 mb-3">ADMINISTRADORES CADASTRADOS:</h5>
                                        <div id="adminsList" class="space-y-2">
                                            <!-- Admins list will be loaded here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-blue-50 rounded-2xl p-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                    <span class="text-2xl mr-2">üîÑ</span>
                                    ATUALIZA√á√ÉO AUTOM√ÅTICA
                                </h4>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">URL DE ATUALIZA√á√ÉO</label>
                                        <input type="url" id="updateUrl" placeholder="https://api.exemplo.com/jogos" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-3">FREQU√äNCIA DE ATUALIZA√á√ÉO</label>
                                        <div class="space-y-2">
                                            <label class="flex items-center">
                                                <input type="radio" name="updateFrequency" value="7" class="mr-2">
                                                <span>A cada 7 dias</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="updateFrequency" value="30" checked class="mr-2">
                                                <span>A cada 30 dias</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="updateFrequency" value="60" class="mr-2">
                                                <span>A cada 60 dias</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="updateFrequency" value="90" class="mr-2">
                                                <span>A cada 90 dias</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <button onclick="updateGames()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                        üîÑ ATUALIZAR JOGOS AGORA
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Filtros e Exclus√£o -->
                            <div class="bg-purple-50 rounded-2xl p-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                    <span class="text-2xl mr-2">üîç</span>
                                    FILTRAR JOGOS
                                </h4>
                                
                                <select id="categoryFilter" onchange="filterGames()" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none mb-4">
                                    <option value="">Todas as categorias</option>
                                    <option value="1-3">Creche (1-3 anos)</option>
                                    <option value="4-6">Infantil (4-6 anos)</option>
                                    <option value="7-9">Fundamental I (7-9 anos)</option>
                                    <option value="10-14">Fundamental II (10-14 anos)</option>
                                    <option value="naee">Sala do NAEE (Educa√ß√£o Especial)</option>
                                </select>
                                
                                <div class="border-t pt-4">
                                    <h5 class="text-lg font-bold text-red-600 mb-3 flex items-center">
                                        <span class="text-xl mr-2">üóëÔ∏è</span>
                                        EXCLUS√ÉO EM MASSA
                                    </h5>
                                    
                                    <div class="space-y-3">
                                        <button onclick="deleteAllCustomGames()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                            üóëÔ∏è EXCLUIR TODOS OS JOGOS PERSONALIZADOS
                                        </button>
                                        
                                        <button onclick="deleteGamesByCategory()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                            üìÇ EXCLUIR POR CATEGORIA
                                        </button>
                                    </div>
                                    
                                    <div class="mt-3 p-3 bg-red-100 rounded-lg">
                                        <p class="text-red-800 text-xs font-semibold">‚ö†Ô∏è ATEN√á√ÉO:</p>
                                        <p class="text-red-700 text-xs">Estas a√ß√µes n√£o podem ser desfeitas!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lista de Jogos -->
                    <div class="mt-8 bg-white rounded-2xl p-6 border-2 border-gray-200">
                        <h4 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span class="text-2xl mr-2">üìã</span>
                            JOGOS CADASTRADOS
                        </h4>
                        
                        <div id="gamesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Games will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Detail Modal -->
        <div id="gameDetailModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-60 hidden items-center justify-center p-4">
            <div class="bg-white rounded-3xl max-w-2xl w-full max-h-[80vh] overflow-hidden shadow-2xl">
                <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-6 text-white">
                    <div class="flex items-center justify-between">
                        <h3 id="detailGameTitle" class="text-2xl font-bold"></h3>
                        <button onclick="closeGameDetail()" class="bg-white/20 hover:bg-white/30 rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="gameDetailContent" class="p-6 overflow-y-auto max-h-[calc(80vh-120px)]">
                    <!-- Game details will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <script>
        let capiEnabled = true;
        let currentAgeGroup = null;
        let playerName = '';
        let customGames = JSON.parse(localStorage.getItem('customGames')) || [];
        let editingGameId = null;
        let isLoggedIn = false;
        let searchActive = false;
        let adminCredentials = JSON.parse(localStorage.getItem('adminCredentials')) || [
            { username: 'admin', password: 'capi2024' }
        ];
        
        const games = {
            '1-3': [
                {
                    title: 'CORES M√ÅGICAS',
                    description: 'TOQUE NAS CORES IGUAIS!',
                    icon: 'üåà',
                    type: 'cores',
                    content: createColorGame
                }
            ],
            '4-6': [
                {
                    title: 'CA√áA LETRAS',
                    description: 'ENCONTRE AS LETRAS DO ALFABETO!',
                    icon: 'üî§',
                    type: 'portugues',
                    content: createLetterGame
                }
            ],
            '7-9': [
                {
                    title: 'Quebra-Cabe√ßa Matem√°tico',
                    description: 'Resolva as opera√ß√µes e monte o quebra-cabe√ßa!',
                    icon: 'üßÆ',
                    type: 'matematica',
                    content: createMathGame
                }
            ],
            '10-14': [
                {
                    title: 'Laborat√≥rio de Ci√™ncias',
                    description: 'Experimente e descubra os segredos da natureza!',
                    icon: 'üî¨',
                    type: 'ciencias',
                    content: createScienceGame
                }
            ],
            'naee': [
                {
                    title: 'COMUNICA√á√ÉO VISUAL',
                    description: 'Jogos com s√≠mbolos e gestos para comunica√ß√£o!',
                    icon: 'üëã',
                    type: 'comunicacao',
                    content: createCommunicationGame
                },
                {
                    title: 'COORDENA√á√ÉO MOTORA',
                    description: 'Exerc√≠cios adaptados para desenvolvimento motor!',
                    icon: 'ü§≤',
                    type: 'coordenacao',
                    content: createMotorGame
                },
                {
                    title: 'RECONHECIMENTO SENSORIAL',
                    description: 'Est√≠mulos visuais e auditivos adaptados!',
                    icon: 'üëÅÔ∏è',
                    type: 'sensorial',
                    content: createSensoryGame
                },
                {
                    title: 'ROTINA E AUTONOMIA',
                    description: 'Atividades para desenvolver independ√™ncia!',
                    icon: '‚è∞',
                    type: 'rotina',
                    content: createRoutineGame
                }
            ]
        };

        const capiMessages = [
            "OI! EU SOU O CAPI! üêπ",
            "VAMOS APRENDER JUNTOS? üìö",
            "ESCOLHA SUA IDADE E VAMOS BRINCAR! üéÆ",
            "QUE LEGAL! VOC√ä EST√Å EXPLORANDO! üåü",
            "CONTINUE ASSIM, VOC√ä EST√Å INDO MUITO BEM! üëè",
            "LEMBRE-SE: ERRAR FAZ PARTE DO APRENDER! üí™"
        ];

        // Search Functions
        function toggleSearch() {
            const searchSection = document.getElementById('searchSection');
            const ageGroupsSection = document.getElementById('ageGroupsSection');
            const nameSection = document.getElementById('nameSection');
            
            if (searchActive) {
                searchSection.classList.add('hidden');
                if (playerName) {
                    ageGroupsSection.classList.remove('hidden');
                } else {
                    nameSection.classList.remove('hidden');
                }
                searchActive = false;
                showCapiMessage("VOLTOU PARA A TELA PRINCIPAL! üè†");
            } else {
                searchSection.classList.remove('hidden');
                ageGroupsSection.classList.add('hidden');
                nameSection.classList.add('hidden');
                searchActive = true;
                showCapiMessage("VAMOS BUSCAR JOGOS INCR√çVEIS! üîç");
            }
        }

        function performSearch() {
            const keyword = document.getElementById('searchKeyword').value.toUpperCase();
            const age = document.getElementById('searchAge').value;
            const type = document.getElementById('searchType').value;
            
            const searchResults = document.getElementById('searchResults');
            const searchResultsGrid = document.getElementById('searchResultsGrid');
            
            let allGames = [];
            
            // Collect all games
            Object.keys(games).forEach(category => {
                games[category].forEach(game => {
                    allGames.push({
                        ...game,
                        category: category
                    });
                });
            });
            
            // Filter games
            let filteredGames = allGames.filter(game => {
                let matchesKeyword = !keyword || 
                    game.title.toUpperCase().includes(keyword) || 
                    game.description.toUpperCase().includes(keyword);
                
                let matchesAge = !age || game.category === age;
                let matchesType = !type || game.type === type;
                
                return matchesKeyword && matchesAge && matchesType;
            });
            
            if (filteredGames.length === 0) {
                searchResultsGrid.innerHTML = `
                    <div class="col-span-full text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">üòî</div>
                        <p class="text-xl font-bold">NENHUM JOGO ENCONTRADO</p>
                        <p>Tente outros filtros ou palavras-chave!</p>
                    </div>
                `;
            } else {
                searchResultsGrid.innerHTML = filteredGames.map(game => `
                    <div class="game-preview cursor-pointer" onclick="openGameFromSearch('${game.category}', '${game.title}')" 
                         style="background: linear-gradient(135deg, ${game.color || '#667eea'} 0%, ${adjustColor(game.color || '#667eea', -20)} 100%)">
                        <div class="text-6xl mb-4">${game.icon}</div>
                        <h4 class="text-xl font-bold mb-2">${game.title}</h4>
                        <p class="text-sm opacity-90 mb-2">${game.description}</p>
                        <div class="text-xs bg-white/20 px-2 py-1 rounded-full">
                            ${getCategoryName(game.category)} ‚Ä¢ ${getTypeName(game.type)}
                        </div>
                    </div>
                `).join('');
                
                showCapiMessage(`ENCONTREI ${filteredGames.length} JOGOS PARA VOC√ä! üéØ`);
            }
            
            searchResults.classList.remove('hidden');
        }

        function openGameFromSearch(category, title) {
            const game = games[category].find(g => g.title === title);
            if (game) {
                openGame(game);
            }
        }

        function clearSearch() {
            document.getElementById('searchKeyword').value = '';
            document.getElementById('searchAge').value = '';
            document.getElementById('searchType').value = '';
            document.getElementById('searchResults').classList.add('hidden');
            showCapiMessage("BUSCA LIMPA! DIGITE NOVOS FILTROS! üßπ");
        }

        function getTypeName(type) {
            const types = {
                'matematica': 'Matem√°tica',
                'portugues': 'Portugu√™s',
                'ciencias': 'Ci√™ncias',
                'cores': 'Cores e Formas',
                'coordenacao': 'Coordena√ß√£o',
                'comunicacao': 'Comunica√ß√£o',
                'sensorial': 'Sensorial',
                'rotina': 'Rotina'
            };
            return types[type] || 'Geral';
        }

        // Admin Management Functions
        function addAdmin() {
            const username = document.getElementById('newAdminUser').value.trim();
            const password = document.getElementById('newAdminPassword').value.trim();
            
            if (!username || !password) {
                showCapiMessage("PREENCHA USU√ÅRIO E SENHA! ‚ö†Ô∏è");
                return;
            }
            
            if (adminCredentials.find(admin => admin.username === username)) {
                showCapiMessage("USU√ÅRIO J√Å EXISTE! ESCOLHA OUTRO! ‚ùå");
                return;
            }
            
            adminCredentials.push({ username, password });
            localStorage.setItem('adminCredentials', JSON.stringify(adminCredentials));
            
            document.getElementById('newAdminUser').value = '';
            document.getElementById('newAdminPassword').value = '';
            
            loadAdminsList();
            showCapiMessage("ADMINISTRADOR ADICIONADO COM SUCESSO! ‚úÖ");
        }

        function loadAdminsList() {
            const adminsList = document.getElementById('adminsList');
            
            adminsList.innerHTML = adminCredentials.map((admin, index) => `
                <div class="flex items-center justify-between bg-white p-3 rounded-lg border">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">üë§</span>
                        <div>
                            <p class="font-bold text-gray-800">${admin.username}</p>
                            <p class="text-xs text-gray-500">Senha: ${'‚Ä¢'.repeat(admin.password.length)}</p>
                        </div>
                    </div>
                    ${index > 0 ? `
                        <button onclick="removeAdmin(${index})" class="bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded">
                            üóëÔ∏è REMOVER
                        </button>
                    ` : `
                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">ADMIN PRINCIPAL</span>
                    `}
                </div>
            `).join('');
        }

        function removeAdmin(index) {
            if (index === 0) {
                showCapiMessage("N√ÉO POSSO REMOVER O ADMIN PRINCIPAL! ‚ö†Ô∏è");
                return;
            }
            
            if (confirm(`Tem certeza que deseja remover o administrador "${adminCredentials[index].username}"?`)) {
                adminCredentials.splice(index, 1);
                localStorage.setItem('adminCredentials', JSON.stringify(adminCredentials));
                loadAdminsList();
                showCapiMessage("ADMINISTRADOR REMOVIDO! üóëÔ∏è");
            }
        }

        // Capi interactions
        document.getElementById('capi').addEventListener('click', function() {
            if (!capiEnabled) return;
            
            this.classList.add('dance');
            setTimeout(() => this.classList.remove('dance'), 1000);
            
            showCapiMessage(capiMessages[Math.floor(Math.random() * capiMessages.length)]);
        });

        document.getElementById('toggleCapi').addEventListener('click', function() {
            capiEnabled = !capiEnabled;
            const capiContainer = document.getElementById('capiContainer');
            const toggleText = document.getElementById('capiToggleText');
            
            if (capiEnabled) {
                capiContainer.style.display = 'block';
                toggleText.textContent = 'üêπ DESABILITAR CAPI';
                showCapiMessage("OBA! ESTOU DE VOLTA! üéâ");
            } else {
                capiContainer.style.display = 'none';
                toggleText.textContent = 'üêπ HABILITAR CAPI';
            }
        });

        function showCapiMessage(message) {
            if (!capiEnabled) return;
            
            const speech = document.getElementById('capiSpeech');
            const messageEl = document.getElementById('capiMessage');
            
            messageEl.textContent = message;
            speech.classList.remove('hidden');
            
            setTimeout(() => {
                speech.classList.add('hidden');
            }, 3000);
        }

        function selectAgeGroup(ageGroup) {
            currentAgeGroup = ageGroup;
            
            // Hide dashboard, show games
            document.querySelector('.grid').style.display = 'none';
            document.getElementById('gamesSection').classList.remove('hidden');
            
            // Update title
            const titles = {
                '1-3': 'JOGOS PARA 1 A 3 ANOS',
                '4-6': 'JOGOS PARA 4 A 6 ANOS',
                '7-9': 'Jogos para 7 a 9 anos',
                '10-14': 'Jogos para 10 a 14 anos',
                'naee': 'SALA DO NAEE - EDUCA√á√ÉO ESPECIAL'
            };
            
            document.getElementById('gamesSectionTitle').textContent = titles[ageGroup];
            
            // Load games
            loadGames(ageGroup);
            
            // Capi message
            const messages = {
                '1-3': `${playerName}, VAMOS BRINCAR COM CORES! üåà`,
                '4-6': `${playerName}, HORA DE APRENDER LETRAS! üìù`,
                '7-9': `${playerName}, QUE LEGAL! VAMOS RESOLVER PROBLEMAS JUNTOS! üß†`,
                '10-14': `${playerName}, EXCELENTE ESCOLHA! PREPARE-SE PARA DESAFIOS INCR√çVEIS! üöÄ`,
                'naee': `${playerName}, BEM-VINDO √Ä SALA DO NAEE! JOGOS ESPECIAIS PARA VOC√ä! üåü`
            };
            
            showCapiMessage(messages[ageGroup]);
        }

        function loadGames(ageGroup) {
            const gamesGrid = document.getElementById('gamesGrid');
            gamesGrid.innerHTML = '';
            
            games[ageGroup].forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-preview';
                
                // Use custom color if available
                if (game.color) {
                    gameCard.style.background = `linear-gradient(135deg, ${game.color} 0%, ${adjustColor(game.color, -20)} 100%)`;
                }
                
                gameCard.innerHTML = `
                    <div class="text-6xl mb-4">${game.icon}</div>
                    <h4 class="text-xl font-bold mb-2">${game.title}</h4>
                    <p class="text-sm opacity-90">${game.description}</p>
                    ${game.id ? '<div class="text-xs mt-2 bg-white/20 px-2 py-1 rounded-full">PERSONALIZADO</div>' : ''}
                `;
                
                gameCard.addEventListener('click', () => openGame(game));
                gamesGrid.appendChild(gameCard);
            });
        }

        function backToDashboard() {
            document.getElementById('gamesSection').classList.add('hidden');
            document.querySelector('.grid').style.display = 'grid';
            showCapiMessage("ESCOLHA OUTRA IDADE SE QUISER! üòä");
        }

        function openGame(game) {
            document.getElementById('gameTitle').textContent = game.title;
            document.getElementById('gameContent').innerHTML = '';
            
            // Load game content
            game.content(document.getElementById('gameContent'));
            
            document.getElementById('gameModal').classList.remove('hidden');
            document.getElementById('gameModal').classList.add('flex');
            
            showCapiMessage("DIVIRTA-SE JOGANDO! üéÆ");
        }

        function closeGame() {
            document.getElementById('gameModal').classList.add('hidden');
            document.getElementById('gameModal').classList.remove('flex');
        }

        // Game creation functions (without scoring systems)
        function createColorGame(container) {
            const colors = ['üî¥', 'üü°', 'üü¢', 'üîµ', 'üü£', 'üü†'];
            let targetColor = colors[Math.floor(Math.random() * colors.length)];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-3xl font-bold text-purple-600 mb-4">ENCONTRE A COR:</h4>
                    <div class="text-8xl mb-6">${targetColor}</div>
                    <div class="grid grid-cols-3 gap-4 max-w-md mx-auto">
                        ${colors.map(color => `
                            <button class="text-6xl p-4 rounded-2xl bg-gray-100 hover:bg-gray-200 transition-colors" 
                                    onclick="checkColor('${color}', '${targetColor}')">
                                ${color}
                            </button>
                        `).join('')}
                    </div>
                    <div id="colorResult" class="mt-6 text-2xl font-bold"></div>
                </div>
            `;
        }

        function createLetterGame(container) {
            const letters = ['A', 'B', 'C', 'D', 'E', 'F'];
            let targetLetter = letters[Math.floor(Math.random() * letters.length)];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-2xl font-bold text-blue-600 mb-4">ENCONTRE A LETRA:</h4>
                    <div class="text-8xl mb-6 font-bold text-blue-800">${targetLetter}</div>
                    <div class="grid grid-cols-3 gap-4 max-w-md mx-auto">
                        ${letters.map(letter => `
                            <button class="text-4xl font-bold p-4 rounded-2xl bg-blue-100 hover:bg-blue-200 transition-colors text-blue-800" 
                                    onclick="checkLetter('${letter}', '${targetLetter}')">
                                ${letter}
                            </button>
                        `).join('')}
                    </div>
                    <div id="letterResult" class="mt-6 text-xl font-bold"></div>
                </div>
            `;
        }

        function createMathGame(container) {
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            const correctAnswer = num1 + num2;
            const wrongAnswers = [correctAnswer + 1, correctAnswer - 1, correctAnswer + 2].filter(n => n > 0);
            const allAnswers = [correctAnswer, ...wrongAnswers.slice(0, 2)].sort(() => Math.random() - 0.5);
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-2xl font-bold text-green-600 mb-4">RESOLVA A OPERA√á√ÉO:</h4>
                    <div class="text-6xl mb-6 font-bold text-green-800">${num1} + ${num2} = ?</div>
                    <div class="grid grid-cols-3 gap-4 max-w-md mx-auto">
                        ${allAnswers.map(answer => `
                            <button class="text-3xl font-bold p-4 rounded-2xl bg-green-100 hover:bg-green-200 transition-colors text-green-800" 
                                    onclick="checkMath(${answer}, ${correctAnswer})">
                                ${answer}
                            </button>
                        `).join('')}
                    </div>
                    <div id="mathResult" class="mt-6 text-xl font-bold"></div>
                </div>
            `;
        }

        function createScienceGame(container) {
            const experiments = [
                { question: "O que acontece quando misturamos √°gua e √≥leo?", answer: "Eles n√£o se misturam", options: ["Eles se misturam completamente", "Eles n√£o se misturam", "Eles viram gelo"] },
                { question: "Qual √© o estado da √°gua a 100¬∞C?", answer: "Vapor", options: ["L√≠quido", "S√≥lido", "Vapor"] },
                { question: "O que as plantas precisam para fazer fotoss√≠ntese?", answer: "Luz solar", options: ["Apenas √°gua", "Luz solar", "Apenas terra"] }
            ];
            
            const experiment = experiments[Math.floor(Math.random() * experiments.length)];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-2xl font-bold text-purple-600 mb-4">EXPERIMENTO CIENT√çFICO</h4>
                    <div class="text-4xl mb-4">üî¨</div>
                    <p class="text-lg mb-6 text-gray-700">${experiment.question}</p>
                    <div class="space-y-3 max-w-md mx-auto">
                        ${experiment.options.map(option => `
                            <button class="w-full text-left p-4 rounded-2xl bg-purple-100 hover:bg-purple-200 transition-colors text-purple-800 font-semibold" 
                                    onclick="checkScience('${option}', '${experiment.answer}')">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                    <div id="scienceResult" class="mt-6 text-xl font-bold"></div>
                </div>
            `;
        }

        // Game check functions (without scoring)
        function checkColor(selected, target) {
            const result = document.getElementById('colorResult');
            if (selected === target) {
                result.innerHTML = '<span class="text-green-600">üéâ MUITO BEM!</span>';
                showCapiMessage(`PARAB√âNS ${playerName}! VOC√ä ACERTOU! üåü`);
            } else {
                result.innerHTML = '<span class="text-orange-600">TENTE NOVAMENTE!</span>';
                showCapiMessage(`${playerName}, QUASE L√Å! TENTA DE NOVO! üí™`);
            }
        }

        function checkLetter(selected, target) {
            const result = document.getElementById('letterResult');
            if (selected === target) {
                result.innerHTML = '<span class="text-green-600">üéâ EXCELENTE!</span>';
                showCapiMessage(`${playerName}, ISSO A√ç! VOC√ä CONHECE AS LETRAS! üìö`);
            } else {
                result.innerHTML = '<span class="text-orange-600">TENTE OUTRA VEZ!</span>';
                showCapiMessage(`${playerName}, BOA TENTATIVA! VAMOS TENTAR MAIS UMA VEZ! üéØ`);
            }
        }

        function checkMath(selected, correct) {
            const result = document.getElementById('mathResult');
            if (selected === correct) {
                result.innerHTML = '<span class="text-green-600">üéâ Perfeito! Voc√™ √© um matem√°tico!</span>';
                showCapiMessage("Incr√≠vel! Voc√™ domina a matem√°tica! üßÆ");
            } else {
                result.innerHTML = '<span class="text-orange-600">Quase! Pense um pouco mais...</span>';
                showCapiMessage("Boa tentativa! A matem√°tica √© sobre praticar! üí°");
            }
        }

        function checkScience(selected, correct) {
            const result = document.getElementById('scienceResult');
            if (selected === correct) {
                result.innerHTML = '<span class="text-green-600">üéâ Excelente! Voc√™ √© um cientista!</span>';
                showCapiMessage("Fant√°stico! Continue explorando a ci√™ncia! üî¨");
            } else {
                result.innerHTML = '<span class="text-orange-600">Interessante hip√≥tese! Que tal tentar outra?</span>';
                showCapiMessage("√ìtima reflex√£o! A ci√™ncia √© sobre experimentar! üß™");
            }
        }

        // NAEE Games Functions
        function createCommunicationGame(container) {
            const symbols = [
                { emoji: 'üòä', word: 'FELIZ', sound: 'Feliz!' },
                { emoji: 'üò¢', word: 'TRISTE', sound: 'Triste!' },
                { emoji: 'üçé', word: 'MA√á√É', sound: 'Ma√ß√£!' },
                { emoji: 'üíß', word: '√ÅGUA', sound: '√Ågua!' }
            ];
            
            const targetSymbol = symbols[Math.floor(Math.random() * symbols.length)];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-3xl font-bold text-orange-600 mb-6">COMUNICA√á√ÉO VISUAL</h4>
                    <div class="bg-yellow-100 rounded-3xl p-8 mb-6">
                        <p class="text-2xl font-bold text-orange-800 mb-4">ENCONTRE O S√çMBOLO:</p>
                        <div class="text-9xl mb-4">${targetSymbol.emoji}</div>
                        <p class="text-3xl font-bold text-orange-700">${targetSymbol.word}</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                        ${symbols.map(symbol => `
                            <button class="bg-white hover:bg-orange-50 border-4 border-orange-200 hover:border-orange-400 rounded-3xl p-6 transition-all transform hover:scale-105" 
                                    onclick="checkCommunication('${symbol.emoji}', '${targetSymbol.emoji}', '${symbol.sound}')">
                                <div class="text-6xl mb-2">${symbol.emoji}</div>
                                <p class="text-xl font-bold text-orange-700">${symbol.word}</p>
                            </button>
                        `).join('')}
                    </div>
                    <div id="communicationResult" class="mt-6 text-2xl font-bold"></div>
                </div>
            `;
        }

        function createMotorGame(container) {
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-3xl font-bold text-pink-600 mb-6">COORDENA√á√ÉO MOTORA</h4>
                    <div class="bg-pink-100 rounded-3xl p-8 mb-6">
                        <p class="text-2xl font-bold text-pink-800 mb-4">SIGA OS MOVIMENTOS:</p>
                        <div id="motorTarget" class="text-8xl mb-4">üëã</div>
                        <p class="text-xl text-pink-700">ACENE COM A M√ÉO!</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                        <button class="bg-white hover:bg-pink-50 border-4 border-pink-200 hover:border-pink-400 rounded-3xl p-8 transition-all transform hover:scale-105" 
                                onclick="performMotorAction('wave')">
                            <div class="text-6xl mb-2">üëã</div>
                            <p class="text-xl font-bold text-pink-700">ACENAR</p>
                        </button>
                        
                        <button class="bg-white hover:bg-pink-50 border-4 border-pink-200 hover:border-pink-400 rounded-3xl p-8 transition-all transform hover:scale-105" 
                                onclick="performMotorAction('clap')">
                            <div class="text-6xl mb-2">üëè</div>
                            <p class="text-xl font-bold text-pink-700">BATER PALMAS</p>
                        </button>
                        
                        <button class="bg-white hover:bg-pink-50 border-4 border-pink-200 hover:border-pink-400 rounded-3xl p-8 transition-all transform hover:scale-105" 
                                onclick="performMotorAction('point')">
                            <div class="text-6xl mb-2">üëâ</div>
                            <p class="text-xl font-bold text-pink-700">APONTAR</p>
                        </button>
                        
                        <button class="bg-white hover:bg-pink-50 border-4 border-pink-200 hover:border-pink-400 rounded-3xl p-8 transition-all transform hover:scale-105" 
                                onclick="performMotorAction('thumbs')">
                            <div class="text-6xl mb-2">üëç</div>
                            <p class="text-xl font-bold text-pink-700">JOINHA</p>
                        </button>
                    </div>
                    <div id="motorResult" class="mt-6 text-2xl font-bold"></div>
                </div>
            `;
        }

        function createSensoryGame(container) {
            const colors = ['üî¥', 'üü°', 'üîµ', 'üü¢'];
            const shapes = ['‚≠ê', '‚ù§Ô∏è', 'üî∑', 'üî∂'];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-3xl font-bold text-indigo-600 mb-6">RECONHECIMENTO SENSORIAL</h4>
                    <div class="bg-indigo-100 rounded-3xl p-8 mb-6">
                        <p class="text-2xl font-bold text-indigo-800 mb-4">TOQUE NAS CORES:</p>
                        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                            ${colors.map(color => `
                                <button class="text-8xl p-6 bg-white rounded-3xl border-4 border-indigo-200 hover:border-indigo-400 transition-all transform hover:scale-110" 
                                        onclick="touchSensory('${color}')">
                                    ${color}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-purple-100 rounded-3xl p-8">
                        <p class="text-2xl font-bold text-purple-800 mb-4">TOQUE NAS FORMAS:</p>
                        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                            ${shapes.map(shape => `
                                <button class="text-8xl p-6 bg-white rounded-3xl border-4 border-purple-200 hover:border-purple-400 transition-all transform hover:scale-110" 
                                        onclick="touchSensory('${shape}')">
                                    ${shape}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    <div id="sensoryResult" class="mt-6 text-2xl font-bold"></div>
                </div>
            `;
        }

        function createRoutineGame(container) {
            const routines = [
                { icon: 'ü¶∑', action: 'ESCOVAR OS DENTES', time: 'MANH√É' },
                { icon: 'üçΩÔ∏è', action: 'ALMO√áAR', time: 'MEIO-DIA' },
                { icon: 'üõÅ', action: 'TOMAR BANHO', time: 'NOITE' },
                { icon: 'üò¥', action: 'DORMIR', time: 'NOITE' }
            ];
            
            container.innerHTML = `
                <div class="text-center">
                    <h4 class="text-3xl font-bold text-teal-600 mb-6">ROTINA E AUTONOMIA</h4>
                    <div class="bg-teal-100 rounded-3xl p-8 mb-6">
                        <p class="text-2xl font-bold text-teal-800 mb-6">ORGANIZE SUA ROTINA:</p>
                        <div class="grid grid-cols-1 gap-4 max-w-lg mx-auto">
                            ${routines.map((routine, index) => `
                                <div class="bg-white rounded-2xl p-6 border-4 border-teal-200 hover:border-teal-400 transition-all cursor-pointer" 
                                     onclick="selectRoutine(${index})">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-4">
                                            <span class="text-4xl">${routine.icon}</span>
                                            <div class="text-left">
                                                <p class="text-xl font-bold text-teal-700">${routine.action}</p>
                                                <p class="text-lg text-teal-600">${routine.time}</p>
                                            </div>
                                        </div>
                                        <div class="text-3xl text-teal-400">‚úì</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div id="routineResult" class="mt-6 text-2xl font-bold"></div>
                </div>
            `;
        }

        // NAEE Game Check Functions
        function checkCommunication(selected, target, sound) {
            const result = document.getElementById('communicationResult');
            if (selected === target) {
                result.innerHTML = '<span class="text-green-600">üéâ MUITO BEM! COMUNICA√á√ÉO PERFEITA!</span>';
                showCapiMessage(`EXCELENTE ${playerName}! VOC√ä SE COMUNICOU MUITO BEM! üëè`);
            } else {
                result.innerHTML = '<span class="text-orange-600">CONTINUE TENTANDO! VOC√ä CONSEGUE!</span>';
                showCapiMessage(`${playerName}, TENTE NOVAMENTE! CADA TENTATIVA √â UM APRENDIZADO! üí™`);
            }
        }

        function performMotorAction(action) {
            const result = document.getElementById('motorResult');
            const target = document.getElementById('motorTarget');
            
            const actions = {
                'wave': { emoji: 'üëã', message: 'ACENANDO!' },
                'clap': { emoji: 'üëè', message: 'BATENDO PALMAS!' },
                'point': { emoji: 'üëâ', message: 'APONTANDO!' },
                'thumbs': { emoji: 'üëç', message: 'JOINHA!' }
            };
            
            target.textContent = actions[action].emoji;
            result.innerHTML = `<span class="text-green-600">üéâ ${actions[action].message}</span>`;
            showCapiMessage(`√ìTIMO MOVIMENTO ${playerName}! CONTINUE PRATICANDO! ü§≤`);
        }

        function touchSensory(item) {
            const result = document.getElementById('sensoryResult');
            result.innerHTML = '<span class="text-green-600">üéâ √ìTIMO TOQUE! VOC√ä RECONHECEU!</span>';
            showCapiMessage(`PERFEITO ${playerName}! SEUS SENTIDOS EST√ÉO FUNCIONANDO MUITO BEM! üëÅÔ∏è`);
        }

        function selectRoutine(index) {
            const result = document.getElementById('routineResult');
            const routines = ['MANH√É', 'MEIO-DIA', 'NOITE', 'NOITE'];
            result.innerHTML = `<span class="text-green-600">üéâ ROTINA ORGANIZADA! HORA DE ${routines[index]}!</span>`;
            showCapiMessage(`MUITO BOM ${playerName}! VOC√ä EST√Å ORGANIZANDO SUA ROTINA! ‚è∞`);
        }

        // Name input functionality
        document.getElementById('playerName').addEventListener('input', function(e) {
            // Convert to uppercase
            e.target.value = e.target.value.toUpperCase();
            
            // Enable/disable start button
            const startButton = document.getElementById('startButton');
            if (e.target.value.trim().length >= 2) {
                startButton.disabled = false;
                startButton.classList.remove('disabled:bg-gray-400', 'disabled:cursor-not-allowed');
            } else {
                startButton.disabled = true;
                startButton.classList.add('disabled:bg-gray-400', 'disabled:cursor-not-allowed');
            }
        });

        // Enter key to start game
        document.getElementById('playerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('startButton').disabled) {
                startGame();
            }
        });

        function startGame() {
            const nameInput = document.getElementById('playerName');
            playerName = nameInput.value.trim();
            
            if (playerName.length < 2) {
                showCapiMessage("PRECISO SABER SEU NOME PRIMEIRO! üòä");
                return;
            }
            
            // Hide name section, show age groups
            document.getElementById('nameSection').classList.add('hidden');
            document.getElementById('ageGroupsSection').classList.remove('hidden');
            
            // Personalized Capi greeting
            showCapiMessage(`OL√Å ${playerName}! ESCOLHA SUA IDADE PARA COME√áAR! üéÆ`);
        }

        // Login functions
        function closeLogin() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginModal').classList.remove('flex');
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('loginUser').value;
            const password = document.getElementById('loginPassword').value;
            
            const validAdmin = adminCredentials.find(admin => 
                admin.username === username && admin.password === password
            );
            
            if (validAdmin) {
                isLoggedIn = true;
                closeLogin();
                openGameConfig();
                showCapiMessage("LOGIN REALIZADO COM SUCESSO! BEM-VINDO! ‚úÖ");
            } else {
                document.getElementById('loginError').classList.remove('hidden');
                showCapiMessage("CREDENCIAIS INCORRETAS! TENTE NOVAMENTE! ‚ùå");
            }
        });

        // Configuration functions
        function openGameConfig() {
            if (!isLoggedIn) {
                document.getElementById('loginModal').classList.remove('hidden');
                document.getElementById('loginModal').classList.add('flex');
                showCapiMessage("ACESSO RESTRITO! FA√áA LOGIN PARA CONTINUAR! üîê");
                return;
            }
            
            document.getElementById('configModal').classList.remove('hidden');
            document.getElementById('configModal').classList.add('flex');
            loadGamesList();
            loadAdminsList();
            showCapiMessage("VAMOS CONFIGURAR NOVOS JOGOS! ‚öôÔ∏è");
        }

        function closeConfig() {
            document.getElementById('configModal').classList.add('hidden');
            document.getElementById('configModal').classList.remove('flex');
            resetForm();
            isLoggedIn = false; // Logout ao fechar configura√ß√µes
        }

        function deleteAllCustomGames() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO!\n\nTem certeza que deseja EXCLUIR TODOS os jogos personalizados?\n\nEsta a√ß√£o N√ÉO PODE ser desfeita!')) {
                if (confirm('CONFIRMA√á√ÉO FINAL:\n\nDigite "CONFIRMAR" para prosseguir com a exclus√£o de TODOS os jogos personalizados.')) {
                    // Remove todos os jogos personalizados
                    customGames = [];
                    
                    // Remove dos objetos de jogos
                    Object.keys(games).forEach(category => {
                        games[category] = games[category].filter(g => !g.id);
                    });

                    localStorage.setItem('customGames', JSON.stringify(customGames));
                    loadGamesList();
                    showCapiMessage("TODOS OS JOGOS PERSONALIZADOS FORAM EXCLU√çDOS! üóëÔ∏è");
                }
            }
        }

        function deleteGamesByCategory() {
            const category = document.getElementById('categoryFilter').value;
            
            if (!category) {
                showCapiMessage("SELECIONE UMA CATEGORIA PRIMEIRO! üìÇ");
                return;
            }

            const categoryName = getCategoryName(category);
            const gamesInCategory = customGames.filter(g => g.category === category);
            
            if (gamesInCategory.length === 0) {
                showCapiMessage(`NENHUM JOGO ENCONTRADO NA CATEGORIA ${categoryName}! üìÇ`);
                return;
            }

            if (confirm(`‚ö†Ô∏è ATEN√á√ÉO!\n\nTem certeza que deseja excluir TODOS os ${gamesInCategory.length} jogos da categoria "${categoryName}"?\n\nEsta a√ß√£o N√ÉO PODE ser desfeita!`)) {
                // Remove jogos da categoria selecionada
                customGames = customGames.filter(g => g.category !== category);
                
                // Remove dos objetos de jogos
                games[category] = games[category].filter(g => !g.id);

                localStorage.setItem('customGames', JSON.stringify(customGames));
                loadGamesList();
                showCapiMessage(`JOGOS DA CATEGORIA ${categoryName} EXCLU√çDOS! üóëÔ∏è`);
            }
        }

        // Color preview update
        document.getElementById('cardColor').addEventListener('input', function(e) {
            const color = e.target.value;
            const preview = document.getElementById('colorPreview');
            preview.style.background = `linear-gradient(135deg, ${color} 0%, ${adjustColor(color, -20)} 100%)`;
        });

        function adjustColor(color, amount) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * amount);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // Form submission
        document.getElementById('gameForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const gameData = {
                id: editingGameId || Date.now().toString(),
                name: document.getElementById('gameName').value.toUpperCase(),
                description: document.getElementById('gameDescription').value,
                category: document.getElementById('gameCategory').value,
                type: document.getElementById('gameType').value,
                color: document.getElementById('cardColor').value,
                icon: document.getElementById('gameIcon').value || 'üéÆ',
                image: document.getElementById('gameImage').value,
                path: document.getElementById('gamePath').value,
                url: document.getElementById('gameUrl').value,
                createdAt: editingGameId ? customGames.find(g => g.id === editingGameId).createdAt : new Date().toISOString()
            };

            if (editingGameId) {
                const index = customGames.findIndex(g => g.id === editingGameId);
                customGames[index] = gameData;
                showCapiMessage("JOGO ATUALIZADO COM SUCESSO! ‚úÖ");
            } else {
                customGames.push(gameData);
                showCapiMessage("NOVO JOGO ADICIONADO! üéâ");
            }

            // Add to games object
            if (!games[gameData.category]) {
                games[gameData.category] = [];
            }
            
            const gameIndex = games[gameData.category].findIndex(g => g.id === gameData.id);
            const gameObj = {
                id: gameData.id,
                title: gameData.name,
                description: gameData.description,
                icon: gameData.icon,
                color: gameData.color,
                type: gameData.type,
                content: () => createCustomGameContent(gameData)
            };

            if (gameIndex >= 0) {
                games[gameData.category][gameIndex] = gameObj;
            } else {
                games[gameData.category].push(gameObj);
            }

            localStorage.setItem('customGames', JSON.stringify(customGames));
            loadGamesList();
            resetForm();
        });

        function createCustomGameContent(gameData) {
            return function(container) {
                container.innerHTML = `
                    <div class="text-center">
                        <div class="text-6xl mb-4">${gameData.icon}</div>
                        <h4 class="text-2xl font-bold mb-4" style="color: ${gameData.color}">${gameData.name}</h4>
                        <p class="text-gray-600 mb-6">${gameData.description}</p>
                        
                        ${gameData.image ? `<img src="${gameData.image}" alt="${gameData.name}" class="max-w-full h-48 object-cover rounded-lg mx-auto mb-4" onerror="this.style.display='none'">` : ''}
                        
                        <div class="space-y-4">
                            ${gameData.url ? `
                                <a href="${gameData.url}" target="_blank" rel="noopener noreferrer" 
                                   class="inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                    üöÄ JOGAR ONLINE
                                </a>
                            ` : ''}
                            
                            ${gameData.path ? `
                                <p class="text-sm text-gray-500">Caminho: ${gameData.path}</p>
                            ` : ''}
                        </div>
                        
                        <div class="mt-6 p-4 bg-yellow-100 rounded-lg">
                            <p class="text-yellow-800 font-semibold">üéÆ JOGO PERSONALIZADO</p>
                            <p class="text-yellow-700 text-sm">Este jogo foi adicionado pelo professor!</p>
                        </div>
                    </div>
                `;
            };
        }

        function loadGamesList() {
            const gamesList = document.getElementById('gamesList');
            const filter = document.getElementById('categoryFilter').value;
            
            let filteredGames = customGames;
            if (filter) {
                filteredGames = customGames.filter(game => game.category === filter);
            }

            if (filteredGames.length === 0) {
                gamesList.innerHTML = `
                    <div class="col-span-full text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">üìù</div>
                        <p>Nenhum jogo cadastrado ainda.</p>
                    </div>
                `;
                return;
            }

            gamesList.innerHTML = filteredGames.map(game => `
                <div class="bg-white border-2 border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <span class="text-2xl">${game.icon}</span>
                            <div class="w-4 h-4 rounded-full border-2 border-gray-300" style="background-color: ${game.color}"></div>
                        </div>
                        <span class="text-xs bg-gray-100 px-2 py-1 rounded-full">${getCategoryName(game.category)}</span>
                    </div>
                    
                    <h5 class="font-bold text-gray-800 mb-2">${game.name}</h5>
                    <p class="text-sm text-gray-600 mb-3 line-clamp-2">${game.description || 'Sem descri√ß√£o'}</p>
                    
                    <div class="flex space-x-2">
                        <button onclick="viewGameDetail('${game.id}')" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition-colors">
                            üëÅÔ∏è VER
                        </button>
                        <button onclick="editGame('${game.id}')" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition-colors">
                            ‚úèÔ∏è EDITAR
                        </button>
                        <button onclick="deleteIndividualGame('${game.id}', '${game.name}')" class="flex-1 bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition-colors">
                            üóëÔ∏è EXCLUIR
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryName(category) {
            const names = {
                '1-3': 'Creche',
                '4-6': 'Infantil',
                '7-9': 'Fund. I',
                '10-14': 'Fund. II',
                'naee': 'NAEE'
            };
            return names[category] || category;
        }

        function filterGames() {
            loadGamesList();
        }

        function viewGameDetail(gameId) {
            const game = customGames.find(g => g.id === gameId);
            if (!game) return;

            document.getElementById('detailGameTitle').textContent = game.name;
            document.getElementById('gameDetailContent').innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <span class="text-4xl">${game.icon}</span>
                        <div>
                            <div class="w-8 h-8 rounded-lg border-2 border-gray-300" style="background-color: ${game.color}"></div>
                        </div>
                    </div>
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-1">CATEGORIA:</h6>
                        <p class="text-gray-600">${getCategoryName(game.category)}</p>
                    </div>
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-1">TIPO:</h6>
                        <p class="text-gray-600">${getTypeName(game.type)}</p>
                    </div>
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-1">DESCRI√á√ÉO:</h6>
                        <p class="text-gray-600">${game.description || 'Sem descri√ß√£o'}</p>
                    </div>
                    
                    ${game.image ? `
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-1">IMAGEM:</h6>
                            <img src="${game.image}" alt="${game.name}" class="max-w-full h-32 object-cover rounded-lg" onerror="this.style.display='none'">
                        </div>
                    ` : ''}
                    
                    ${game.path ? `
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-1">CAMINHO:</h6>
                            <p class="text-gray-600 font-mono text-sm bg-gray-100 p-2 rounded">${game.path}</p>
                        </div>
                    ` : ''}
                    
                    ${game.url ? `
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-1">URL:</h6>
                            <a href="${game.url}" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:text-blue-700 underline break-all">${game.url}</a>
                        </div>
                    ` : ''}
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-1">CRIADO EM:</h6>
                        <p class="text-gray-600">${new Date(game.createdAt).toLocaleDateString('pt-BR')}</p>
                    </div>
                </div>
            `;

            document.getElementById('gameDetailModal').classList.remove('hidden');
            document.getElementById('gameDetailModal').classList.add('flex');
        }

        function closeGameDetail() {
            document.getElementById('gameDetailModal').classList.add('hidden');
            document.getElementById('gameDetailModal').classList.remove('flex');
        }

        function editGame(gameId) {
            const game = customGames.find(g => g.id === gameId);
            if (!game) return;

            editingGameId = gameId;
            
            document.getElementById('gameName').value = game.name;
            document.getElementById('gameDescription').value = game.description;
            document.getElementById('gameCategory').value = game.category;
            document.getElementById('gameType').value = game.type;
            document.getElementById('cardColor').value = game.color;
            document.getElementById('gameIcon').value = game.icon;
            document.getElementById('gameImage').value = game.image;
            document.getElementById('gamePath').value = game.path;
            document.getElementById('gameUrl').value = game.url;

            // Update color preview
            const preview = document.getElementById('colorPreview');
            preview.style.background = `linear-gradient(135deg, ${game.color} 0%, ${adjustColor(game.color, -20)} 100%)`;

            showCapiMessage("MODO DE EDI√á√ÉO ATIVADO! ‚úèÔ∏è");
        }

        function deleteIndividualGame(gameId, gameName) {
            if (confirm(`‚ö†Ô∏è CONFIRMA√á√ÉO DE EXCLUS√ÉO\n\nTem certeza que deseja excluir o jogo:\n"${gameName}"\n\nEsta a√ß√£o N√ÉO PODE ser desfeita!`)) {
                const game = customGames.find(g => g.id === gameId);
                const categoryName = game ? getCategoryName(game.category) : '';
                
                customGames = customGames.filter(g => g.id !== gameId);
                
                // Remove from games object
                Object.keys(games).forEach(category => {
                    games[category] = games[category].filter(g => g.id !== gameId);
                });

                localStorage.setItem('customGames', JSON.stringify(customGames));
                loadGamesList();
                showCapiMessage(`JOGO "${gameName}" EXCLU√çDO DA CATEGORIA ${categoryName}! üóëÔ∏è`);
            }
        }

        function resetForm() {
            document.getElementById('gameForm').reset();
            document.getElementById('cardColor').value = '#667eea';
            document.getElementById('colorPreview').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            editingGameId = null;
        }

        function updateGames() {
            const updateUrl = document.getElementById('updateUrl').value;
            const frequency = document.querySelector('input[name="updateFrequency"]:checked').value;
            
            if (!updateUrl) {
                showCapiMessage("ADICIONE UMA URL DE ATUALIZA√á√ÉO PRIMEIRO! üîó");
                return;
            }

            // Simulate update process
            showCapiMessage("BUSCANDO ATUALIZA√á√ïES... ‚è≥");
            
            setTimeout(() => {
                showCapiMessage("ATUALIZA√á√ÉO CONCLU√çDA! NENHUM JOGO NOVO ENCONTRADO. ‚úÖ");
                
                // Save update settings
                localStorage.setItem('updateSettings', JSON.stringify({
                    url: updateUrl,
                    frequency: frequency,
                    lastUpdate: new Date().toISOString()
                }));
            }, 2000);
        }

        // Load custom games on startup
        function loadCustomGames() {
            customGames.forEach(gameData => {
                if (!games[gameData.category]) {
                    games[gameData.category] = [];
                }
                
                const gameObj = {
                    id: gameData.id,
                    title: gameData.name,
                    description: gameData.description,
                    icon: gameData.icon,
                    color: gameData.color,
                    type: gameData.type,
                    content: createCustomGameContent(gameData)
                };

                const existingIndex = games[gameData.category].findIndex(g => g.id === gameData.id);
                if (existingIndex >= 0) {
                    games[gameData.category][existingIndex] = gameObj;
                } else {
                    games[gameData.category].push(gameObj);
                }
            });
        }

        // Initial Capi greeting
        setTimeout(() => {
            showCapiMessage("OL√Å! BEM-VINDOS AO CAPI GAMES! üéÆ");
            loadCustomGames();
        }, 1000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98c82cd825f78b17',t:'MTc2MDEyMDg4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
