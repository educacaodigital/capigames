<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📊ORDENE POR TAMANHO</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 10px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FFE5B4 0%, #FFCCCB 25%, #E6E6FA 50%, #F0FFF0 75%, #FFF8DC 100%);
            height: 100%;
            color: #333;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Animação do fundo */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 182, 193, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(173, 216, 230, 0.4) 0%, transparent 45%),
                radial-gradient(circle at 40% 80%, rgba(144, 238, 144, 0.4) 0%, transparent 55%);
            animation: backgroundFloat 30s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateX(0px) translateY(0px) rotate(0deg); }
            33% { transform: translateX(20px) translateY(-15px) rotate(1deg); }
            66% { transform: translateX(-15px) translateY(20px) rotate(-1deg); }
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.98) 100%);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 30px 90px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.8);
            backdrop-filter: blur(20px);
            border: 5px solid;
            border-image: linear-gradient(45deg, #FF69B4, #87CEEB, #98FB98, #DDA0DD, #FFD700) 1;
            position: relative;
            min-height: calc(100vh - 20px);
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: white;
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 4px 4px 10px rgba(255, 140, 0, 0.8), 0 0 25px rgba(255, 140, 0, 0.6);
            animation: titleBounce 3s ease-in-out infinite;
            text-transform: uppercase;
            letter-spacing: 4px;
            filter: drop-shadow(3px 3px 6px rgba(255, 140, 0, 0.4));
            background: linear-gradient(135deg, #FF8C00 0%, #FF4500 25%, #FFD700 50%, #FF6347 75%, #FFA500 100%);
            padding: 20px;
            border-radius: 25px;
            border: 4px solid rgba(255, 255, 255, 0.3);
        }

        @keyframes titleBounce {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-8px) scale(1.02); }
        }

        .instructions {
            background: linear-gradient(135deg, #FFE4E1 0%, #F0F8FF 100%);
            padding: 20px;
            border-radius: 25px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.6rem;
            font-weight: bold;
            color: #FF6347;
            text-transform: uppercase;
            box-shadow: 0 15px 40px rgba(255, 99, 71, 0.3);
            animation: instructionsGlow 4s ease-in-out infinite;
            border: 4px solid #FFB6C1;
            letter-spacing: 2px;
        }

        @keyframes instructionsGlow {
            0%, 100% { box-shadow: 0 15px 40px rgba(255, 99, 71, 0.3); }
            50% { box-shadow: 0 20px 50px rgba(255, 99, 71, 0.5); }
        }

        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 25px;
        }

        .objects-section {
            background: linear-gradient(135deg, #E6E6FA 0%, #F0F8FF 100%);
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 20px 50px rgba(230, 230, 250, 0.4);
            border: 4px solid #DDA0DD;
        }

        .section-title {
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: #4682B4;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            letter-spacing: 2px;
        }

        .objects-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            min-height: 150px;
            padding: 20px;
        }

        .slots-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            min-height: 180px;
            padding: 20px;
        }

        .size-slot {
            background: transparent;
            border: 4px dashed #999;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
            position: relative;
            flex-direction: column;
            gap: 10px;
            padding: 0;
        }

        .size-slot.small {
            width: 80px;
            height: 80px;
        }

        .size-slot.medium {
            width: 120px;
            height: 120px;
        }

        .size-slot.large {
            width: 170px;
            height: 170px;
        }

        .size-slot .slot-label {
            position: absolute;
            bottom: -35px;
            font-size: 1rem;
            font-weight: bold;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        .size-slot.drag-over {
            background: rgba(144, 238, 144, 0.4);
            border-color: #32CD32;
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(50, 205, 50, 0.5);
        }

        .size-slot.filled {
            background: transparent;
            border-color: #32CD32;
            border-style: solid;
            animation: successPulse 1.2s ease-in-out;
        }

        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .draggable-object {
            background: transparent;
            border: none;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: all 0.4s ease;
            user-select: none;
            position: relative;
            box-shadow: none;
        }

        .draggable-object.small {
            width: 60px;
            height: 60px;
            font-size: 3rem;
        }

        .draggable-object.medium {
            width: 100px;
            height: 100px;
            font-size: 5rem;
        }

        .draggable-object.large {
            width: 150px;
            height: 150px;
            font-size: 8rem;
        }

        .draggable-object:hover {
            transform: scale(1.15) rotate(5deg);
            filter: drop-shadow(0 8px 15px rgba(0,0,0,0.3));
        }

        .draggable-object:active {
            cursor: grabbing;
            transform: scale(1.2) rotate(8deg);
        }

        .draggable-object.dragging {
            opacity: 0.9;
            transform: scale(1.3) rotate(10deg);
            z-index: 1000;
            filter: drop-shadow(0 15px 25px rgba(0,0,0,0.4));
        }

        .draggable-object.placed {
            cursor: default;
            opacity: 0.7;
            pointer-events: none;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .control-button {
            background: linear-gradient(135deg, #FF69B4 0%, #FF1493 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 12px 35px rgba(255, 105, 180, 0.4);
            text-transform: uppercase;
            letter-spacing: 2px;
            border: 4px solid rgba(255,255,255,0.3);
        }

        .control-button:hover {
            transform: translateY(-6px) scale(1.05);
            box-shadow: 0 18px 45px rgba(255, 105, 180, 0.6);
        }

        .control-button:active {
            transform: translateY(-3px) scale(1.02);
        }

        .back-button {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            box-shadow: 0 12px 35px rgba(78, 205, 196, 0.4);
        }

        .back-button:hover {
            box-shadow: 0 18px 45px rgba(78, 205, 196, 0.6);
        }

        .reset-button {
            background: linear-gradient(135deg, #FFA726 0%, #FF7043 100%);
            box-shadow: 0 12px 35px rgba(255, 167, 38, 0.4);
        }

        .reset-button:hover {
            box-shadow: 0 18px 45px rgba(255, 167, 38, 0.6);
        }

        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #32CD32 0%, #228B22 100%);
            color: white;
            padding: 40px 60px;
            border-radius: 30px;
            font-size: 3rem;
            font-weight: bold;
            text-transform: uppercase;
            box-shadow: 0 25px 70px rgba(50, 205, 50, 0.5);
            z-index: 2000;
            display: none;
            pointer-events: none;
            text-align: center;
            border: 5px solid rgba(255,255,255,0.3);
        }

        @keyframes successShow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
            15% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            85% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        .celebration-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1500;
        }

        .celebration-star {
            position: absolute;
            font-size: 4rem;
            opacity: 0;
            animation: starCelebration 3s ease-out;
        }

        @keyframes starCelebration {
            0% { 
                opacity: 0; 
                transform: scale(0) rotate(0deg); 
            }
            30% { 
                opacity: 1; 
                transform: scale(1.5) rotate(180deg); 
            }
            70% { 
                opacity: 1; 
                transform: scale(1.2) rotate(270deg); 
            }
            100% { 
                opacity: 0; 
                transform: scale(0) rotate(360deg); 
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 5px;
            }
            
            .header h1 {
                font-size: 2.2rem;
                padding: 15px;
            }
            
            .instructions {
                font-size: 1.3rem;
                padding: 15px;
            }
            
            .objects-container,
            .slots-container {
                gap: 20px;
                flex-direction: column;
                align-items: center;
            }
            
            .draggable-object.small {
                width: 80px;
                height: 80px;
                font-size: 4rem;
            }
            
            .draggable-object.medium {
                width: 120px;
                height: 120px;
                font-size: 6rem;
            }
            
            .draggable-object.large {
                width: 170px;
                height: 170px;
                font-size: 9rem;
            }
            
            .size-slot.small {
                width: 100px;
                height: 100px;
            }
            
            .size-slot.medium {
                width: 140px;
                height: 140px;
            }
            
            .size-slot.large {
                width: 190px;
                height: 190px;
            }
            
            .control-button {
                padding: 18px 25px;
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .instructions {
                font-size: 1.1rem;
            }
            
            .success-message {
                font-size: 2.2rem;
                padding: 30px 40px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>📏 ORDENE POR TAMANHO 📏</h1>
        </header>

        <div class="instructions">
            🎯 ARRASTE DO MENOR PARA O MAIOR!
        </div>

        <div class="game-area">
            <div class="objects-section">
                <div class="section-title" id="objectsTitle">🧸 ARRASTE OS URSINHOS</div>
                <div class="objects-container" id="objectsContainer">
                    <!-- Objetos serão gerados pelo JavaScript -->
                </div>
            </div>

            <div class="objects-section">
                <div class="section-title">📍 COLOQUE NA ORDEM CERTA</div>
                <div class="slots-container" id="slotsContainer">
                    <div class="size-slot small" data-size="small">
                        <div class="slot-label">PEQUENO</div>
                    </div>
                    <div class="size-slot medium" data-size="medium">
                        <div class="slot-label">MÉDIO</div>
                    </div>
                    <div class="size-slot large" data-size="large">
                        <div class="slot-label">GRANDE</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="control-button back-button" id="backBtn">⬅️ VOLTAR</button>
            <button class="control-button reset-button" id="resetBtn">🔄 NOVO JOGO</button>
        </div>
    </div>

    <div class="success-message" id="successMessage">
        🎉 MUITO BEM! VOCÊ ACERTOU! 🎉
    </div>

    <div class="celebration-stars" id="celebrationStars"></div>

    <script>
        // Configuração dos temas do jogo
        const gameThemes = [
            {
                name: 'bears',
                title: '🧸 ARRASTE OS URSINHOS',
                objects: {
                    small: '🐻',
                    medium: '🧸',
                    large: '🐻‍❄️'
                }
            },
            {
                name: 'cars',
                title: '🚗 ARRASTE OS CARRINHOS',
                objects: {
                    small: '🚙',
                    medium: '🚗',
                    large: '🚚'
                }
            },
            {
                name: 'cats',
                title: '🐱 ARRASTE OS GATINHOS',
                objects: {
                    small: '🐱',
                    medium: '🐱',
                    large: '🐱'
                }
            },
            {
                name: 'fruits',
                title: '🍎 ARRASTE AS MAÇÃS',
                objects: {
                    small: '🍎',
                    medium: '🍎',
                    large: '🍎'
                }
            },
            {
                name: 'balls',
                title: '⚽ ARRASTE AS BOLAS',
                objects: {
                    small: '🏓',
                    medium: '⚽',
                    large: '🏀'
                }
            },
            {
                name: 'hearts',
                title: '❤️ ARRASTE OS CORAÇÕES',
                objects: {
                    small: '❤️',
                    medium: '❤️',
                    large: '❤️'
                }
            },
            {
                name: 'stars',
                title: '⭐ ARRASTE AS ESTRELAS',
                objects: {
                    small: '⭐',
                    medium: '⭐',
                    large: '⭐'
                }
            },
            {
                name: 'flowers',
                title: '🌸 ARRASTE AS FLORES',
                objects: {
                    small: '🌼',
                    medium: '🌸',
                    large: '🌻'
                }
            },
            {
                name: 'diamonds',
                title: '💎 ARRASTE OS DIAMANTES',
                objects: {
                    small: '💎',
                    medium: '💎',
                    large: '💎'
                }
            },
            {
                name: 'pizza',
                title: '🍕 ARRASTE AS PIZZAS',
                objects: {
                    small: '🍕',
                    medium: '🍕',
                    large: '🍕'
                }
            },
            {
                name: 'fish',
                title: '🐠 ARRASTE OS PEIXINHOS',
                objects: {
                    small: '🐠',
                    medium: '🐠',
                    large: '🐠'
                }
            },
            {
                name: 'rockets',
                title: '🚀 ARRASTE OS FOGUETES',
                objects: {
                    small: '🚀',
                    medium: '🚀',
                    large: '🚀'
                }
            },
            {
                name: 'balloons',
                title: '🎈 ARRASTE OS BALÕES',
                objects: {
                    small: '🎈',
                    medium: '🎈',
                    large: '🎈'
                }
            },
            {
                name: 'suns',
                title: '☀️ ARRASTE OS SÓIS',
                objects: {
                    small: '☀️',
                    medium: '☀️',
                    large: '☀️'
                }
            },
            {
                name: 'music',
                title: '🎵 ARRASTE AS NOTAS',
                objects: {
                    small: '🎵',
                    medium: '🎵',
                    large: '🎵'
                }
            },
            {
                name: 'houses',
                title: '🏠 ARRASTE AS CASAS',
                objects: {
                    small: '🏠',
                    medium: '🏡',
                    large: '🏰'
                }
            },
            {
                name: 'trees',
                title: '🌳 ARRASTE AS ÁRVORES',
                objects: {
                    small: '🌳',
                    medium: '🌳',
                    large: '🌳'
                }
            },
            {
                name: 'faces',
                title: '😊 ARRASTE AS CARINHAS',
                objects: {
                    small: '😊',
                    medium: '😊',
                    large: '😊'
                }
            },
            {
                name: 'planes',
                title: '✈️ ARRASTE OS AVIÕES',
                objects: {
                    small: '✈️',
                    medium: '✈️',
                    large: '✈️'
                }
            },
            {
                name: 'hammers',
                title: '🔨 ARRASTE OS MARTELOS',
                objects: {
                    small: '🔨',
                    medium: '🔨',
                    large: '🔨'
                }
            },
            {
                name: 'shirts',
                title: '👕 ARRASTE AS CAMISETAS',
                objects: {
                    small: '👕',
                    medium: '👕',
                    large: '👕'
                }
            },
            {
                name: 'books',
                title: '📚 ARRASTE OS LIVROS',
                objects: {
                    small: '📚',
                    medium: '📚',
                    large: '📚'
                }
            }
        ];

        // Elementos DOM
        const objectsContainer = document.getElementById('objectsContainer');
        const slotsContainer = document.getElementById('slotsContainer');
        const objectsTitle = document.getElementById('objectsTitle');
        const successMessage = document.getElementById('successMessage');
        const celebrationStars = document.getElementById('celebrationStars');
        const backBtn = document.getElementById('backBtn');
        const resetBtn = document.getElementById('resetBtn');

        // Variáveis do jogo
        let audioContext;
        let completedPieces = 0;
        let draggedElement = null;
        let currentTheme = gameThemes[0];

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            initializeGame();
            initAudioContext();
        });

        // Configurar event listeners
        function setupEventListeners() {
            backBtn.addEventListener('click', goBack);
            resetBtn.addEventListener('click', resetGame);
            
            // Inicializar contexto de áudio na primeira interação
            document.addEventListener('click', initAudioContext, { once: true });
            document.addEventListener('touchstart', initAudioContext, { once: true });
            
            // Event listeners para os slots
            const slots = document.querySelectorAll('.size-slot');
            slots.forEach(slot => {
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('drop', handleDrop);
                slot.addEventListener('dragleave', handleDragLeave);
            });
        }

        // Inicializar contexto de áudio
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }

        // Inicializar o jogo
        function initializeGame() {
            completedPieces = 0;
            
            // Alternar tema a cada novo jogo
            currentTheme = gameThemes[Math.floor(Math.random() * gameThemes.length)];
            objectsTitle.textContent = currentTheme.title;
            
            createObjects();
            resetSlots();
        }

        // Criar objetos arrastáveis
        function createObjects() {
            objectsContainer.innerHTML = '';
            
            const sizes = ['small', 'medium', 'large'];
            const shuffledSizes = [...sizes].sort(() => Math.random() - 0.5);
            
            shuffledSizes.forEach(size => {
                const object = document.createElement('div');
                object.className = `draggable-object ${size}`;
                object.draggable = true;
                object.dataset.size = size;
                object.innerHTML = currentTheme.objects[size];
                
                // Event listeners para drag and drop
                object.addEventListener('dragstart', handleDragStart);
                object.addEventListener('dragend', handleDragEnd);
                
                // Suporte para touch em dispositivos móveis
                object.addEventListener('touchstart', handleTouchStart);
                object.addEventListener('touchmove', handleTouchMove);
                object.addEventListener('touchend', handleTouchEnd);
                
                objectsContainer.appendChild(object);
            });
        }

        // Resetar slots
        function resetSlots() {
            const slots = document.querySelectorAll('.size-slot');
            slots.forEach(slot => {
                slot.classList.remove('filled', 'drag-over');
            });
        }

        // Manipuladores de drag and drop
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedElement = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (draggedElement && draggedElement.dataset.size === this.dataset.size && !this.classList.contains('filled')) {
                // Encaixe correto!
                this.classList.add('filled');
                
                // Criar emoji com tamanho ajustado ao slot
                const emoji = document.createElement('div');
                emoji.innerHTML = draggedElement.innerHTML;
                emoji.style.fontSize = this.dataset.size === 'small' ? '2.5rem' : 
                                     this.dataset.size === 'medium' ? '4rem' : '6rem';
                emoji.style.display = 'flex';
                emoji.style.alignItems = 'center';
                emoji.style.justifyContent = 'center';
                emoji.style.width = '100%';
                emoji.style.height = '100%';
                
                this.innerHTML = '';
                this.appendChild(emoji);
                draggedElement.classList.add('placed');
                
                completedPieces++;
                playSuccessSound();
                
                // Vibração (se disponível)
                if (navigator.vibrate) {
                    navigator.vibrate(200);
                }
                
                // Verificar se o jogo foi completado
                if (completedPieces === 3) {
                    setTimeout(showVictory, 800);
                }
            } else {
                // Encaixe incorreto
                playErrorSound();
                
                // Vibração de erro (se disponível)
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            }
        }

        // Suporte para touch (dispositivos móveis)
        let touchOffset = { x: 0, y: 0 };
        let touchElement = null;

        function handleTouchStart(e) {
            e.preventDefault();
            touchElement = this;
            this.classList.add('dragging');
            
            const touch = e.touches[0];
            const rect = this.getBoundingClientRect();
            touchOffset.x = touch.clientX - rect.left;
            touchOffset.y = touch.clientY - rect.top;
            
            // Criar elemento fantasma para arrastar
            this.style.position = 'fixed';
            this.style.zIndex = '1000';
            this.style.pointerEvents = 'none';
        }

        function handleTouchMove(e) {
            if (!touchElement) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            touchElement.style.left = (touch.clientX - touchOffset.x) + 'px';
            touchElement.style.top = (touch.clientY - touchOffset.y) + 'px';
            
            // Verificar se está sobre um slot
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const slot = elementBelow?.closest('.size-slot');
            
            // Remover highlight de todos os slots
            document.querySelectorAll('.size-slot').forEach(s => {
                s.classList.remove('drag-over');
            });
            
            // Adicionar highlight no slot atual
            if (slot) {
                slot.classList.add('drag-over');
            }
        }

        function handleTouchEnd(e) {
            if (!touchElement) return;
            e.preventDefault();
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const slot = elementBelow?.closest('.size-slot');
            
            // Resetar posição do elemento
            touchElement.style.position = '';
            touchElement.style.zIndex = '';
            touchElement.style.left = '';
            touchElement.style.top = '';
            touchElement.style.pointerEvents = '';
            touchElement.classList.remove('dragging');
            
            // Remover highlight de todos os slots
            document.querySelectorAll('.size-slot').forEach(s => {
                s.classList.remove('drag-over');
            });
            
            // Verificar encaixe
            if (slot && touchElement.dataset.size === slot.dataset.size && !slot.classList.contains('filled')) {
                // Encaixe correto!
                slot.classList.add('filled');
                
                // Criar emoji com tamanho ajustado ao slot
                const emoji = document.createElement('div');
                emoji.innerHTML = touchElement.innerHTML;
                emoji.style.fontSize = slot.dataset.size === 'small' ? '2.5rem' : 
                                     slot.dataset.size === 'medium' ? '4rem' : '6rem';
                emoji.style.display = 'flex';
                emoji.style.alignItems = 'center';
                emoji.style.justifyContent = 'center';
                emoji.style.width = '100%';
                emoji.style.height = '100%';
                
                slot.innerHTML = '';
                slot.appendChild(emoji);
                touchElement.classList.add('placed');
                
                completedPieces++;
                playSuccessSound();
                
                // Vibração (se disponível)
                if (navigator.vibrate) {
                    navigator.vibrate(200);
                }
                
                // Verificar se o jogo foi completado
                if (completedPieces === 3) {
                    setTimeout(showVictory, 800);
                }
            } else if (slot) {
                // Encaixe incorreto
                playErrorSound();
                
                // Vibração de erro (se disponível)
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            }
            
            touchElement = null;
        }

        // Tocar som de sucesso
        function playSuccessSound() {
            if (!audioContext) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // Dó
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.15); // Mi
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.3); // Sol
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.6);
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.6);
                
            } catch (error) {
                console.log('Erro ao tocar som de sucesso:', error);
            }
        }

        // Tocar som de erro
        function playErrorSound() {
            if (!audioContext) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(180, audioContext.currentTime + 0.15);
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.4);
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.4);
                
            } catch (error) {
                console.log('Erro ao tocar som de erro:', error);
            }
        }

        // Mostrar vitória
        function showVictory() {
            successMessage.innerHTML = '🎉 MUITO BEM! VOCÊ ACERTOU! 🎉<br><small style="font-size: 1.5rem; margin-top: 15px; display: block;">Novo desafio chegando em 3 segundos...</small>';
            successMessage.style.display = 'block';
            successMessage.style.animation = 'successShow 5s ease-in-out';
            createCelebrationStars();
            playVictorySound();
            
            // Vibração de vitória (se disponível)
            if (navigator.vibrate) {
                navigator.vibrate([300, 100, 300, 100, 300]);
            }
            
            // Iniciar novo jogo automaticamente após 3 segundos
            setTimeout(() => {
                successMessage.style.display = 'none';
                successMessage.style.animation = '';
                successMessage.innerHTML = '🎉 MUITO BEM! VOCÊ ACERTOU! 🎉';
                resetGame();
            }, 3000);
        }

        // Tocar som de vitória
        function playVictorySound() {
            if (!audioContext) return;
            
            try {
                const melody = [523.25, 659.25, 783.99, 1046.50, 783.99, 1046.50]; // Dó, Mi, Sol, Dó, Sol, Dó
                
                melody.forEach((frequency, index) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime + index * 0.2);
                    
                    gainNode.gain.setValueAtTime(0, audioContext.currentTime + index * 0.2);
                    gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + index * 0.2 + 0.05);
                    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + index * 0.2 + 0.4);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start(audioContext.currentTime + index * 0.2);
                    oscillator.stop(audioContext.currentTime + index * 0.2 + 0.4);
                });
                
            } catch (error) {
                console.log('Erro ao tocar som de vitória:', error);
            }
        }

        // Criar estrelas de celebração
        function createCelebrationStars() {
            const starEmojis = ['⭐', '🌟', '✨', '💫', '🎉', '🎊'];
            
            for (let i = 0; i < 25; i++) {
                const star = document.createElement('div');
                star.className = 'celebration-star';
                star.innerHTML = starEmojis[Math.floor(Math.random() * starEmojis.length)];
                
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = (Math.random() * 2) + 's';
                
                celebrationStars.appendChild(star);
                
                // Remover estrela após animação
                setTimeout(() => {
                    if (star.parentNode) {
                        star.parentNode.removeChild(star);
                    }
                }, 4000);
            }
        }

        // Resetar jogo
        function resetGame() {
            // Limpar celebração
            celebrationStars.innerHTML = '';
            successMessage.style.display = 'none';
            successMessage.style.animation = '';
            
            // Resetar todos os objetos e slots
            document.querySelectorAll('.draggable-object').forEach(obj => {
                obj.classList.remove('placed', 'dragging');
            });
            
            document.querySelectorAll('.size-slot').forEach(slot => {
                slot.classList.remove('filled', 'drag-over');
                // Restaurar labels dos slots
                const labels = { small: 'PEQUENO', medium: 'MÉDIO', large: 'GRANDE' };
                slot.innerHTML = `<div class="slot-label">${labels[slot.dataset.size]}</div>`;
            });
            
            // Reinicializar jogo
            setTimeout(() => {
                initializeGame();
            }, 300);
        }

        // Voltar para página anterior
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.close();
            }
        }

        // Interação por teclado para acessibilidade
        document.addEventListener('keydown', function(event) {
            const key = event.key.toLowerCase();
            
            switch(key) {
                case ' ': // Espaço para resetar
                    event.preventDefault();
                    resetGame();
                    break;
                case 'escape': // ESC para voltar
                    goBack();
                    break;
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99003a4eb50c8b1b',t:'MTc2MDcwODYzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
