<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßºQUIZ DA HIGIENE PESSOAL</title>
    <!-- Tailwind CSS para estiliza√ß√£o r√°pida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Fonte e anima√ß√µes personalizadas */
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
            overflow-x: hidden;
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }

        .animate-slide-in {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .screen {
            display: none;
            min-height: 100vh;
            width: 100%;
        }
        
        .screen.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <!-- TELA INICIAL -->
    <div id="start-screen" class="screen active bg-gradient-to-br from-cyan-100 via-sky-200 to-blue-200 flex-col items-center justify-center p-4">
        
        <button class="absolute top-6 left-6 text-slate-700 px-6 py-3 hover:bg-white/40 bg-white/20 backdrop-blur-sm rounded-2xl transition-colors font-black tracking-widest text-xl flex items-center gap-3 border-2 border-white/50 shadow-sm">
            MENU
        </button>

        <div class="bg-white/90 backdrop-blur-md rounded-3xl shadow-xl p-8 max-w-4xl w-full text-center transform transition-all hover:scale-[1.01] duration-300 flex flex-col md:flex-row items-center gap-8 animate-fade-in-up relative border border-white">
            
            <div class="flex-1 flex justify-center mt-8 md:mt-0">
                <div class="bg-cyan-100 p-8 rounded-full">
                    <!-- √çcone Gota d'√Ågua (Higiene) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-24 h-24 text-cyan-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5C14.8 8.4 12 2 12 2S9.2 8.4 8 9.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/>
                        <path d="M12 8c.5 0 2.5 1.5 2.5 4"/>
                    </svg>
                </div>
            </div>
            
            <div class="flex-1 text-left">
                <h1 class="text-4xl md:text-5xl font-extrabold text-slate-700 mb-4 leading-tight">QUIZ DA HIGIENE</h1>
                
                <div class="flex items-center gap-3 mb-8 justify-center md:justify-start">
                    <button onclick="speakIntro()" class="text-cyan-500 hover:text-cyan-600 hover:bg-cyan-50 p-3 rounded-full transition-all flex-shrink-0" title="Ouvir Instru√ß√µes">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
                    </button>
                    <p class="text-slate-500 text-lg font-bold text-left leading-tight">
                        LEIA CADA PERGUNTA COM ATEN√á√ÉO E ESCOLHA A ALTERNATIVA CORRETA. MANTER BONS H√ÅBITOS DE HIGIENE √â ESSENCIAL PARA A SA√öDE E O BEM-ESTAR.
                    </p>
                </div>
                
                <button onclick="startGame()" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-black tracking-widest py-5 px-6 rounded-2xl shadow-lg shadow-cyan-200 transition-all transform active:scale-95 text-2xl flex items-center justify-center gap-3 group">
                    <span class="group-hover:animate-pulse">‚ô™</span> JOGAR 
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- TELA DE JOGO -->
    <div id="game-screen" class="screen flex-col font-sans uppercase overflow-hidden relative overflow-y-auto bg-slate-50">
        
        <!-- Bot√£o Voltar (Esquerda) -->
        <div class="absolute top-4 left-4 z-10">
            <button onclick="goBackToMenu()" class="bg-white px-6 py-3 rounded-2xl shadow-sm border border-slate-100 text-slate-500 hover:text-cyan-500 hover:bg-cyan-50 transition-all font-bold tracking-widest flex items-center gap-3" title="Voltar ao Menu">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
                VOLTAR
            </button>
        </div>

        <!-- Bot√£o Mute (Direita) -->
        <div class="absolute top-4 right-4 z-10">
            <button onclick="toggleSound()" id="sound-btn" class="bg-white p-3 rounded-2xl shadow-sm border border-slate-100 text-cyan-400 hover:text-cyan-600 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
            </button>
        </div>

        <div class="flex-1 flex flex-col h-full p-4 lg:p-6 gap-6 items-center justify-center max-w-3xl mx-auto w-full mt-16 lg:mt-0">
            
            <h2 class="text-cyan-600 text-3xl lg:text-5xl font-black tracking-widest text-center animate-fade-in-up drop-shadow-sm mb-2">
                PERGUNTA
            </h2>

            <div class="w-full flex flex-col justify-center">
                <div class="bg-white rounded-3xl shadow-xl shadow-slate-200 p-6 lg:p-10 text-center border-t-8 border-cyan-400 relative flex flex-col justify-center items-center min-h-[160px] lg:min-h-[220px]">
                    
                    <!-- Container Flex para Bot√£o de √Åudio e Frase - Alinhamento Centralizado -->
                    <div class="flex flex-row items-center justify-center gap-4 w-full max-w-2xl">
                        <!-- Bot√£o de √Åudio -->
                        <button onclick="speakQuestion()" class="flex-shrink-0 bg-cyan-50 text-cyan-400 hover:bg-cyan-100 hover:text-cyan-600 p-3 rounded-full transition-all shadow-sm border border-cyan-100 group" title="Ouvir Pergunta">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 group-hover:scale-110 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
                        </button>
                        
                        <!-- Frase -->
                        <p id="question-text" class="text-2xl lg:text-3xl font-bold text-slate-700 leading-snug text-left flex-grow">
                            <!-- Conte√∫do injetado via JS -->
                        </p>
                    </div>
                </div>
            </div>

            <div class="w-full flex flex-col gap-6 justify-center">
                <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6">
                    <!-- Op√ß√µes injetadas via JS -->
                </div>

                <!-- √Årea de Feedback -->
                <div class="min-h-[8rem] relative w-full"> 
                    <div id="feedback-area" class="hidden animate-slide-in flex items-center gap-4 w-full h-full">
                        <div id="feedback-message-box" class="flex-1 p-4 rounded-2xl shadow-lg border-l-8 flex flex-col justify-center h-full">
                            <!-- Conte√∫do do Feedback injetado via JS -->
                        </div>
                        
                        <button id="next-btn" onclick="nextQuestion()" class="h-full px-8 py-4 rounded-2xl font-black text-lg tracking-widest shadow-xl shadow-cyan-100 transition-all hover:scale-105 active:scale-95 whitespace-nowrap bg-cyan-500 text-white hover:bg-cyan-600 flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- TELA DE RESULTADO -->
    <div id="result-screen" class="screen bg-gradient-to-br from-cyan-100 via-sky-200 to-blue-200 flex-col items-center justify-center p-4">
        <div class="bg-white/90 backdrop-blur-md rounded-3xl shadow-xl p-12 max-w-2xl w-full text-center animate-fade-in-up">
            <div id="trophy-icon" class="flex justify-center mb-8">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-32 h-32 text-amber-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
            </div>

            <h2 class="text-4xl font-black text-slate-700 mb-4">QUIZ CONCLU√çDO!</h2>
            
            <div class="bg-slate-50 rounded-2xl p-8 mb-8 border border-slate-100">
                <p class="text-slate-400 text-lg font-bold tracking-widest mb-2">PONTUA√á√ÉO FINAL</p>
                <p id="final-score" class="text-6xl font-black text-cyan-500">0 / 0</p>
            </div>

            <p id="final-message" class="text-slate-600 font-bold mb-10 text-2xl">PARAB√âNS!</p>

            <button onclick="startGame()" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-black py-4 px-8 rounded-2xl shadow-lg shadow-cyan-200 transition-colors flex items-center justify-center gap-3 text-xl tracking-wider">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74-2.74L3 12"/><path d="M3 3v9h9"/></svg>
                JOGAR NOVAMENTE
            </button>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // --- SINTETIZADOR 8-BIT EXCLUSIVO ---
        const SoundSystem = {
            ctx: null,
            bgmOscillators: [],
            isMuted: false,
            isPlaying: false,
            melodyTimeout: null,

            init: function() {
                if (!this.ctx) {
                    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (this.ctx.state === 'suspended') {
                    this.ctx.resume();
                }
            },

            // Toca um √∫nico tom (beep/boop)
            playTone: function(freq, type, duration, startTime, vol = 0.1) {
                if (this.isMuted || !this.ctx) return;

                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                
                osc.type = type;
                osc.frequency.value = freq;
                
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                
                gain.gain.setValueAtTime(0, startTime);
                gain.gain.linearRampToValueAtTime(vol, startTime + 0.05);
                gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
                
                osc.start(startTime);
                osc.stop(startTime + duration);
            },

            playCorrectFx: function() {
                if (!this.ctx) return;
                const now = this.ctx.currentTime;
                this.playTone(880.00, 'square', 0.1, now, 0.05); // A5
                this.playTone(1108.73, 'square', 0.2, now + 0.1, 0.05); // C#6
            },

            playWrongFx: function() {
                if (!this.ctx) return;
                const now = this.ctx.currentTime;
                this.playTone(200, 'sawtooth', 0.3, now, 0.08);
            },

            playWinFx: function() {
                if (!this.ctx) return;
                const now = this.ctx.currentTime;
                this.playTone(523.25, 'square', 0.1, now, 0.1);      
                this.playTone(659.25, 'square', 0.1, now + 0.1, 0.1); 
                this.playTone(783.99, 'square', 0.1, now + 0.2, 0.1); 
                this.playTone(1046.50, 'square', 0.4, now + 0.3, 0.1); 
            },

            playMelody: function() {
                if (this.isMuted || !this.ctx || !this.isPlaying) return;

                const now = this.ctx.currentTime;
                // Melodia "Meu p√©, meu querido p√©" (Estilo Ratinho - Castelo R√°-Tim-Bum)
                const notes = [
                    { f: 261.63, d: 0.15, t: 0.0 },  // C4
                    { f: 261.63, d: 0.15, t: 0.2 },  // C4
                    { f: 261.63, d: 0.15, t: 0.4 },  // C4
                    { f: 293.66, d: 0.15, t: 0.6 },  // D4
                    { f: 329.63, d: 0.4,  t: 0.8 },  // E4
                    { f: 349.23, d: 0.15, t: 1.4 },  // F4
                    { f: 349.23, d: 0.15, t: 1.6 },  // F4
                    { f: 329.63, d: 0.15, t: 1.8 },  // E4
                    { f: 293.66, d: 0.15, t: 2.0 },  // D4
                    { f: 261.63, d: 0.4,  t: 2.2 },  // C4
                ];

                notes.forEach(n => {
                    this.playTone(n.f, 'triangle', n.d, now + n.t, 0.06); 
                });

                this.melodyTimeout = setTimeout(() => this.playMelody(), 2800);
            },

            startMusic: function() {
                this.isPlaying = true;
                this.init();
                this.playMelody();
            },

            stopMusic: function() {
                this.isPlaying = false;
                if (this.melodyTimeout) clearTimeout(this.melodyTimeout);
            },

            toggleMute: function() {
                this.isMuted = !this.isMuted;
                if (this.isMuted) {
                    this.stopMusic();
                } else {
                    this.startMusic();
                }
                return this.isMuted;
            }
        };

        // --- BANCO DE DADOS: QUIZ DA HIGIENE (30 Perguntas) ---
        const questionsSource = [
            {
                id: 1,
                question: "O QUE DEVEMOS FAZER ANTES DE COMER?",
                options: ["LAVAR AS M√ÉOS", "CORRER", "DORMIR", "BRINCAR"],
                correct: "LAVAR AS M√ÉOS",
                explanation: "LAVAR AS M√ÉOS REMOVE SUJEIRA E GERMES, EVITANDO DOEN√áAS AO TOCAR NA COMIDA."
            },
            {
                id: 2,
                question: "QUANTAS VEZES DEVEMOS ESCOVAR OS DENTES?",
                options: ["AP√ìS REFEI√á√ïES", "UMA VEZ NA VIDA", "S√ì NO NATAL", "NUNCA"],
                correct: "AP√ìS REFEI√á√ïES",
                explanation: "DEVEMOS ESCOVAR OS DENTES AP√ìS CADA REFEI√á√ÉO PARA EVITAR C√ÅRIES E MANTER O H√ÅLITO FRESCO."
            },
            {
                id: 3,
                question: "O QUE USAMOS PARA LAVAR O CABELO?",
                options: ["XAMPU", "DETERGENTE", "√ìLEO DE COZINHA", "AREIA"],
                correct: "XAMPU",
                explanation: "O XAMPU √â FEITO ESPECIALMENTE PARA LIMPAR O COURO CABELUDO E OS FIOS DE CABELO."
            },
            {
                id: 4,
                question: "POR QUE DEVEMOS TOMAR BANHO?",
                options: ["LIMPAR O CORPO", "SUJAR A TOALHA", "GASTAR √ÅGUA", "SENTIR FRIO"],
                correct: "LIMPAR O CORPO",
                explanation: "O BANHO REMOVE O SUOR, A SUJEIRA E AS BACT√âRIAS ACUMULADAS NA PELE DURANTE O DIA."
            },
            {
                id: 5,
                question: "AO ESPIRRAR, O QUE DEVEMOS FAZER?",
                options: ["COBRIR A BOCA", "GRITAR ALTO", "PULAR", "ABRIR OS OLHOS"],
                correct: "COBRIR A BOCA",
                explanation: "COBRIR A BOCA COM O BRA√áO OU LEN√áO EVITA ESPALHAR V√çRUS E BACT√âRIAS PARA OUTRAS PESSOAS."
            },
            {
                id: 6,
                question: "O QUE DEVEMOS FAZER COM O LIXO?",
                options: ["JOGAR NA LIXEIRA", "JOGAR NO CH√ÉO", "GUARDAR NO BOLSO", "COMER"],
                correct: "JOGAR NA LIXEIRA",
                explanation: "LUGAR DE LIXO √â NA LIXEIRA. ISSO MANT√âM O AMBIENTE LIMPO E EVITA BICHOS E DOEN√áAS."
            },
            {
                id: 7,
                question: "O FIO DENTAL SERVE PARA...",
                options: ["LIMPAR ENTRE DENTES", "AMARRAR O DENTE", "COSTURAR ROUPA", "PULAR CORDA"],
                correct: "LIMPAR ENTRE DENTES",
                explanation: "O FIO DENTAL REMOVE A SUJEIRA ONDE A ESCOVA N√ÉO ALCAN√áA, ENTRE OS DENTES."
            },
            {
                id: 8,
                question: "DEVEMOS CORTAR AS UNHAS PARA...",
                options: ["EVITAR SUJEIRA", "ARRANHAR", "PINTAR", "DOER"],
                correct: "EVITAR SUJEIRA",
                explanation: "UNHAS CURTAS E LIMPAS EVITAM O AC√öMULO DE BACT√âRIAS E SUJEIRA EMBAIXO DELAS."
            },
            {
                id: 9,
                question: "ROUPAS SUJAS DEVEM IR PARA...",
                options: ["CESTO DE LAVAR", "DEBAIXO DA CAMA", "GUARDA-ROUPA", "RUA"],
                correct: "CESTO DE LAVAR",
                explanation: "ROUPAS SUJAS DEVEM SER SEPARADAS PARA SEREM LAVADAS E FICAREM LIMPINHAS DE NOVO."
            },
            {
                id: 10,
                question: "AP√ìS USAR O BANHEIRO, DEVEMOS...",
                options: ["LAVAR AS M√ÉOS", "SAIR CORRENDO", "COMER", "DORMIR"],
                correct: "LAVAR AS M√ÉOS",
                explanation: "SEMPRE LAVE AS M√ÉOS AP√ìS O USO DO BANHEIRO PARA ELIMINAR GERMES NOCIVOS."
            },
            {
                id: 11,
                question: "O QUE USAMOS PARA SECAR O CORPO?",
                options: ["TOALHA LIMPA", "JORNAL VELHO", "CORTINA", "LEN√áOL SUJO"],
                correct: "TOALHA LIMPA",
                explanation: "UMA TOALHA LIMPA E SECA √â O IDEAL PARA SECAR A PELE DEPOIS DO BANHO."
            },
            {
                id: 12,
                question: "FRUTAS E VERDURAS DEVEM SER...",
                options: ["LAVADAS", "PINTADAS", "ESCONDIDAS", "JOGADAS FORA"],
                correct: "LAVADAS",
                explanation: "LAVAR BEM AS FRUTAS E VERDURAS REMOVE SUJEIRAS E PRODUTOS QU√çMICOS ANTES DE COMER."
            },
            {
                id: 13,
                question: "O QUE ELIMINA OS GERMES DAS M√ÉOS?",
                options: ["√ÅGUA E SAB√ÉO", "S√ì √ÅGUA", "TERRA", "AR"],
                correct: "√ÅGUA E SAB√ÉO",
                explanation: "A COMBINA√á√ÉO DE √ÅGUA E SAB√ÉO (OU √ÅLCOOL EM GEL) √â A MELHOR FORMA DE MATAR OS GERMES."
            },
            {
                id: 14,
                question: "ANDAR DESCAL√áO NA RUA PODE...",
                options: ["MACHUCAR OS P√âS", "LIMPAR OS P√âS", "FAZER CRESCER", "AJUDAR A CORRER"],
                correct: "MACHUCAR OS P√âS",
                explanation: "ANDAR CAL√áADO PROTEGE OS P√âS DE CORTES, SUJEIRA, BICHOS E DOEN√áAS."
            },
            {
                id: 15,
                question: "DEVEMOS LAVAR AS M√ÉOS DEPOIS DE...",
                options: ["BRINCAR COM ANIMAIS", "OLHAR A TV", "DORMIR", "LER UM LIVRO"],
                correct: "BRINCAR COM ANIMAIS",
                explanation: "ANIMAIS PODEM CARREGAR GERMES, POR ISSO DEVEMOS LAVAR AS M√ÉOS DEPOIS DE TOC√Å-LOS."
            },
            {
                id: 16,
                question: "PARA LIMPAR O NARIZ, USAMOS...",
                options: ["LEN√áO DE PAPEL", "A MANGA DA BLUSA", "A TOALHA DE MESA", "O DEDO SUJO"],
                correct: "LEN√áO DE PAPEL",
                explanation: "USE UM LEN√áO DE PAPEL DESCART√ÅVEL PARA LIMPAR O NARIZ DE FORMA HIGI√äNICA."
            },
            {
                id: 17,
                question: "N√ÉO DEVEMOS COMPARTILHAR...",
                options: ["ESCOVA DE DENTES", "BRINQUEDOS", "LIVROS", "CADEIRAS"],
                correct: "ESCOVA DE DENTES",
                explanation: "OBJETOS DE HIGIENE PESSOAL, COMO ESCOVAS DE DENTE, N√ÉO DEVEM SER EMPRESTADOS."
            },
            {
                id: 18,
                question: "A CASA DEVE SER MANTIDA...",
                options: ["LIMPA E AREJADA", "ESCURA E SUJA", "FECHADA", "BAGUN√áADA"],
                correct: "LIMPA E AREJADA",
                explanation: "UMA CASA LIMPA E COM JANELAS ABERTAS EVITA MOFO E DOEN√áAS RESPIRAT√ìRIAS."
            },
            {
                id: 19,
                question: "BEBER √ÅGUA FILTRADA √â...",
                options: ["BOM PARA SA√öDE", "PERIGOSO", "RUIM", "DESNECESS√ÅRIO"],
                correct: "BOM PARA SA√öDE",
                explanation: "√ÅGUA LIMPA E FILTRADA HIDRATA O CORPO E EVITA DOEN√áAS TRANSMITIDAS PELA √ÅGUA SUJA."
            },
            {
                id: 20,
                question: "DEVEMOS TROCAR DE ROUPA...",
                options: ["QUANDO SUJA", "NUNCA", "UMA VEZ AO ANO", "S√ì NO DOMINGO"],
                correct: "QUANDO SUJA",
                explanation: "USAR ROUPAS LIMPAS AJUDA A MANTER A HIGIENE DO CORPO E O BEM-ESTAR."
            },
            {
                id: 21,
                question: "AS M√ÉOS LEVAM GERMES PARA...",
                options: ["BOCA E OLHOS", "O CH√ÉO", "OS SAPATOS", "AS PAREDES"],
                correct: "BOCA E OLHOS",
                explanation: "EVITE TOCAR O ROSTO COM M√ÉOS SUJAS, POIS ELAS LEVAM GERMES PARA A BOCA, OLHOS E NARIZ."
            },
            {
                id: 22,
                question: "ESCOVAR A L√çNGUA AJUDA A...",
                options: ["TER BOM H√ÅLITO", "FALAR MELHOR", "COMER MAIS", "DORMIR"],
                correct: "TER BOM H√ÅLITO",
                explanation: "A L√çNGUA TAMB√âM ACUMULA SUJEIRA. ESCOV√Å-LA AJUDA A MANTER A BOCA SAUD√ÅVEL."
            },
            {
                id: 23,
                question: "TOALHAS √öMIDAS DEVEM SER...",
                options: ["ESTENDIDAS", "EMBOLADAS", "GUARDADAS", "JOGADAS"],
                correct: "ESTENDIDAS",
                explanation: "TOALHAS MOLHADAS E AMONTOADAS PODEM CRIAR FUNGOS E MAU CHEIRO. ESTENDA-AS PARA SECAR."
            },
            {
                id: 24,
                question: "HIGIENE √â IMPORTANTE PARA...",
                options: ["TER SA√öDE", "FICAR DOENTE", "PERDER TEMPO", "GASTAR DINHEIRO"],
                correct: "TER SA√öDE",
                explanation: "BONS H√ÅBITOS DE HIGIENE PREVINEM DOEN√áAS E NOS MANT√äM SAUD√ÅVEIS E FORTES."
            },
            {
                id: 25,
                question: "SAPATOS SUJOS DEVEM FICAR...",
                options: ["NA ENTRADA", "EM CIMA DA CAMA", "NA MESA", "NO SOF√Å"],
                correct: "NA ENTRADA",
                explanation: "DEIXAR SAPATOS NA ENTRADA EVITA TRAZER SUJEIRA DA RUA PARA DENTRO DE CASA."
            },
            {
                id: 26,
                question: "PIOLHOS N√ÉO GOSTAM DE...",
                options: ["CABE√áA LIMPA", "CABE√áA SUJA", "BON√âS", "ESCOVAS"],
                correct: "CABE√áA LIMPA",
                explanation: "MANTER A CABE√áA LIMPA E EXAMIN√Å-LA COM FREQU√äNCIA AJUDA A EVITAR E TRATAR PIOLHOS."
            },
            {
                id: 27,
                question: "PARA LIMPAR AS ORELHAS, DEVEMOS...",
                options: ["USAR A TOALHA", "ENFIAR PALITOS", "USAR CANETA", "N√ÉO LIMPAR"],
                correct: "USAR A TOALHA",
                explanation: "LIMPE APENAS A PARTE DE FORA DA ORELHA COM A PONTA DA TOALHA. N√ÉO COLOQUE NADA DENTRO!"
            },
            {
                id: 28,
                question: "O QUE FAZER SE UM ALIMENTO CAIR NO CH√ÉO?",
                options: ["JOGAR FORA", "COMER R√ÅPIDO", "SOPRAR E COMER", "GUARDAR"],
                correct: "JOGAR FORA",
                explanation: "O CH√ÉO TEM MUITOS GERMES. √â MAIS SEGURO N√ÉO COMER O QUE CAIU NELE."
            },
            {
                id: 29,
                question: "DEVEMOS LAVAR O ROSTO...",
                options: ["AO ACORDAR", "S√ì NO NATAL", "NUNCA", "COM √ìLEO"],
                correct: "AO ACORDAR",
                explanation: "LAVAR O ROSTO PELA MANH√É TIRA A OLEOSIDADE E AS REMELAS, DEIXANDO A PELE LIMPA."
            },
            {
                id: 30,
                question: "DORMIR BEM √â IMPORTANTE PARA...",
                options: ["DESCANSAR", "CANSAR MAIS", "FICAR TRISTE", "COMER"],
                correct: "DESCANSAR",
                explanation: "O SONO RECUPERA AS ENERGIAS E √â FUNDAMENTAL PARA O CRESCIMENTO E A SA√öDE."
            }
        ];

        // Estado do Jogo
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        // Elementos DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionTextEl = document.getElementById('question-text');
        const optionsGridEl = document.getElementById('options-grid');
        const feedbackAreaEl = document.getElementById('feedback-area');
        const feedbackMessageBox = document.getElementById('feedback-message-box');
        const nextBtn = document.getElementById('next-btn');
        const soundBtn = document.getElementById('sound-btn');

        // √çcones SVG
        const iconCheck = `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m22 4-12 12-4-4"/></svg>`;
        const iconX = `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>`;

        function switchScreen(screenName) {
            window.speechSynthesis.cancel();
            
            startScreen.classList.remove('active');
            gameScreen.classList.remove('active');
            resultScreen.classList.remove('active');

            if (screenName === 'start') startScreen.classList.add('active');
            else if (screenName === 'game') gameScreen.classList.add('active');
            else if (screenName === 'result') resultScreen.classList.add('active');
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startGame() {
            SoundSystem.startMusic();

            currentQuestionIndex = 0;
            score = 0;
            
            let fullPool = [...questionsSource];
            shuffleArray(fullPool);

            let sessionQuestions = fullPool.slice(0, 10);

            currentQuestions = sessionQuestions.map(q => {
                const newQ = { ...q, options: [...q.options] }; 
                shuffleArray(newQ.options); 
                return newQ;
            });

            switchScreen('game');
            loadQuestion();
        }

        function goBackToMenu() {
            SoundSystem.stopMusic();
            switchScreen('start');
        }

        function toggleSound() {
            const isMuted = SoundSystem.toggleMute();
            soundBtn.innerHTML = isMuted 
                ? `<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="1" y1="1" x2="23" y2="23"/><path d="M9 9v6a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"/></svg>`
                : `<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>`;
        }

        function speakIntro() {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance("Quiz da Higiene. Leia cada pergunta com aten√ß√£o e escolha a alternativa correta.");
            utterance.lang = 'pt-BR'; utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function speakQuestion() {
            window.speechSynthesis.cancel();
            const q = currentQuestions[currentQuestionIndex];
            const utterance = new SpeechSynthesisUtterance(q.question);
            utterance.lang = 'pt-BR'; utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function loadQuestion() {
            window.speechSynthesis.cancel();
            isAnswered = false;
            const q = currentQuestions[currentQuestionIndex];
            questionTextEl.innerHTML = `<span class="bg-cyan-100 px-3 py-1 mx-2 rounded-lg text-slate-800 font-black border-b-8 border-cyan-200 inline-block shadow-sm leading-relaxed">${q.question}</span>`;
            optionsGridEl.innerHTML = '';
            feedbackAreaEl.classList.add('hidden');
            
            q.options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = `relative p-5 lg:p-8 rounded-2xl text-xl lg:text-2xl font-bold transition-all duration-200 shadow-sm flex flex-col items-center justify-center gap-2 text-center group min-h-[100px] bg-white hover:bg-cyan-50 border-4 border-slate-100 text-slate-600 hover:-translate-y-1 hover:shadow-md hover:border-cyan-200`;
                btn.innerHTML = `<span class="tracking-wide">${option}</span>`;
                btn.onclick = () => handleAnswer(option, btn, q);
                optionsGridEl.appendChild(btn);
            });
        }

        function handleAnswer(selectedOption, btnElement, question) {
            if (isAnswered) return;
            isAnswered = true;

            const isCorrect = selectedOption === question.correct;
            
            if (isCorrect) {
                score++;
                SoundSystem.playCorrectFx();
            } else {
                SoundSystem.playWrongFx();
            }

            const buttons = optionsGridEl.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('hover:-translate-y-1', 'hover:shadow-md', 'active:scale-95', 'hover:border-cyan-200', 'hover:bg-cyan-50');
                const btnText = btn.innerText;

                if (btnText === question.correct) {
                    btn.className = `relative p-5 lg:p-8 rounded-2xl text-xl lg:text-2xl font-bold shadow-none scale-[0.98] flex flex-col items-center justify-center gap-2 text-center min-h-[100px] bg-emerald-100 border-4 border-emerald-300 text-emerald-600 font-black`;
                    btn.innerHTML += `<div class="absolute top-2 right-2">${iconCheck}</div>`;
                } else if (btnText === selectedOption && !isCorrect) {
                    btn.className = `relative p-5 lg:p-8 rounded-2xl text-xl lg:text-2xl font-bold shadow-none opacity-80 flex flex-col items-center justify-center gap-2 text-center min-h-[100px] bg-rose-100 border-4 border-rose-300 text-rose-600`;
                    btn.innerHTML += `<div class="absolute top-2 right-2">${iconX}</div>`;
                } else {
                    btn.className += ' opacity-40 bg-slate-50 border-slate-100 text-slate-400';
                }
            });

            feedbackAreaEl.classList.remove('hidden');
            
            feedbackMessageBox.innerHTML = `
                <div class="flex flex-col h-full justify-center">
                    <p class="font-bold text-lg ${isCorrect ? 'text-emerald-700' : 'text-rose-700'}">
                        ${isCorrect ? 'üéâ CORRETO!' : 'üòÖ OPS!'}
                    </p>
                    <p class="text-[10px] font-black tracking-widest opacity-60 mt-2 mb-1 uppercase ${isCorrect ? 'text-emerald-600' : 'text-rose-600'}">
                        EXPLICA√á√ÉO
                    </p>
                    <p class="text-sm font-medium opacity-90 leading-tight ${isCorrect ? 'text-emerald-800' : 'text-rose-800'}">
                        ${question.explanation}
                    </p>
                </div>
            `;
            
            if (isCorrect) {
                feedbackMessageBox.className = 'flex-1 p-4 rounded-2xl shadow-lg border-l-8 flex flex-col justify-center h-full bg-emerald-50 border-emerald-300 text-emerald-700';
            } else {
                feedbackMessageBox.className = 'flex-1 p-4 rounded-2xl shadow-lg border-l-8 flex flex-col justify-center h-full bg-rose-50 border-rose-300 text-rose-700';
            }

            if (currentQuestionIndex < currentQuestions.length - 1) {
                nextBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>`;
            } else {
                nextBtn.innerText = 'FIM';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            SoundSystem.stopMusic();
            SoundSystem.playWinFx();

            switchScreen('result');
            const percentage = (score / currentQuestions.length) * 100;
            const finalScoreEl = document.getElementById('final-score');
            const finalMessageEl = document.getElementById('final-message');
            const trophyIconEl = document.getElementById('trophy-icon');

            finalScoreEl.innerText = `${score} / ${currentQuestions.length}`;

            let message = "";
            let trophyColorClass = "text-slate-300"; 

            if (percentage === 100) {
                message = "PERFEITO! VOC√ä √â UM MESTRE DA HIGIENE!";
                trophyColorClass = "text-amber-300"; 
            } else if (percentage >= 70) {
                message = "MUITO BEM! VOC√ä CUIDA BEM DA SA√öDE.";
                trophyColorClass = "text-amber-300";
            } else if (percentage >= 50) {
                message = "BOM ESFOR√áO! CONTINUE SE CUIDANDO.";
            } else {
                message = "TENTE NOVAMENTE PARA APRENDER MAIS.";
            }

            finalMessageEl.innerText = message;
            
            trophyIconEl.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="w-32 h-32 ${trophyColorClass}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>`;
        }
    </script>
</body>
</html>